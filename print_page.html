
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation of an open-source marketplace platform Waldur. See the latest version at https://docs.waldur.com">
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.8">
    
    
      
        <title>Print documentation - Waldur Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="css/print-site.css">
    
      <link rel="stylesheet" href="css/print-site-material.css">
    
    
      
  



  
  



  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-34543419-4","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Waldur Documentation" class="md-header__button md-logo" aria-label="Waldur Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Waldur Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print documentation
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Waldur Documentation" class="md-nav__button md-logo" aria-label="Waldur Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Waldur Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="getting-started.html" class="md-nav__link">
        Getting started
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        About
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="about/contributing.html" class="md-nav__link">
        Contributing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="about/governance.html" class="md-nav__link">
        Governance
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="about/reporting-issues.html" class="md-nav__link">
        Reporting issues
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="about/roadmap.html" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="about/screenshots.html" class="md-nav__link">
        Screenshots
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="about/support.html" class="md-nav__link">
        Support
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Admin guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Admin guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Admin guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/architecture.html" class="md-nav__link">
        Architecture
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/backups.html" class="md-nav__link">
        Backups
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/checklist-for-production.html" class="md-nav__link">
        Checklist for Go live
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/cookie-policy.html" class="md-nav__link">
        Cookie policy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/hardware-requirements.html" class="md-nav__link">
        Hardware requirements
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/managing-with-ansible.html" class="md-nav__link">
        Managing Waldur with Ansible
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7" type="checkbox" id="__nav_4_7" >
      
      <label class="md-nav__link" for="__nav_4_7">
        Deployment
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Deployment" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_7">
          <span class="md-nav__icon md-icon"></span>
          Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/deployment/docker-compose.html" class="md-nav__link">
        Waldur Docker-compose deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/deployment/helm.html" class="md-nav__link">
        Helm
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_8" type="checkbox" id="__nav_4_8" >
      
      <label class="md-nav__link" for="__nav_4_8">
        Identities
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Identities" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_8">
          <span class="md-nav__icon md-icon"></span>
          Identities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/identities/LDAP.html" class="md-nav__link">
        LDAP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/identities/TARA.html" class="md-nav__link">
        TARA
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/identities/eduGAIN.html" class="md-nav__link">
        eduGAIN
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/identities/eduTEAMS.html" class="md-nav__link">
        eduTeams
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/identities/freeipa.html" class="md-nav__link">
        FreeIPA
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/identities/keycloak.html" class="md-nav__link">
        Keycloak
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/identities/summary.html" class="md-nav__link">
        Summary
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_9" type="checkbox" id="__nav_4_9" >
      
      <label class="md-nav__link" for="__nav_4_9">
        Mastermind configuration
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Mastermind configuration" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_9">
          <span class="md-nav__icon md-icon"></span>
          Mastermind configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/mastermind-configuration/configuration-guide.html" class="md-nav__link">
        Configuration guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/mastermind-configuration/general.html" class="md-nav__link">
        General Configuration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/mastermind-configuration/google-calendar.html" class="md-nav__link">
        Configuration of the Google Calendar
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_10" type="checkbox" id="__nav_4_10" >
      
      <label class="md-nav__link" for="__nav_4_10">
        Providers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Providers" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_10">
          <span class="md-nav__icon md-icon"></span>
          Providers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/providers/adding-an-offering.html" class="md-nav__link">
        Adding an offering
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/providers/azure.html" class="md-nav__link">
        Azure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/providers/moab.html" class="md-nav__link">
        MOAB
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/providers/openstack.html" class="md-nav__link">
        OpenStack (Tenant)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/providers/remote-waldur.html" class="md-nav__link">
        Remote Offering
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="admin-guide/providers/slurm.html" class="md-nav__link">
        SLURM provider
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Integrator guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Integrator guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Integrator guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="integrator-guide/ansible-module.html" class="md-nav__link">
        Ansible module for Waldur
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      <label class="md-nav__link" for="__nav_5_2">
        APIs
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="APIs" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          APIs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="integrator-guide/APIs/authentication.html" class="md-nav__link">
        Authentication
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        User guide
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="User guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          User guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="user-guide/index.html" class="md-nav__link">
        User Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="user-guide/marketplace.html" class="md-nav__link">
        Marketplace
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
      <a href="print_page.html" class="md-nav__link md-nav__link--active">
        Print documentation
      </a>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <div id="print-site-page" class="print-site-enumerate-headings">
        <section id="print-site-cover-page">
            
<div style="padding-bottom: 3em">

    
        <h1>Waldur Documentation</h1>
    

    
        <h2>Documentation of an open-source marketplace platform Waldur. See the latest version at https://docs.waldur.com</h2>
    

</div>



<p>
    
    
    
        <small>Copyright &copy; 2016 - 2021 Waldur team</small><br />
    
</p>
        </section>
        
        <div id="print-site-banner">
            <p>
    <em>This box will disappear when printing</em>
    <span style="float: right"><a href="https://timvink.github.io/mkdocs-print-site-plugin/">mkdocs-print-site-plugin</a></span>
</p>
<p>This page combines all site pages and applies print and PDF friendly styling. Print or export to PDF using <b>File > Print > Save as PDF</b>.</p>
<p>For creating PDFs, make sure to use the browser's print and save-as-pdf function instead of the system dialog.</p>
        </div>
        
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="6">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-introduction">Introduction</h1>
<p>Waldur is a platform for managing hybrid cloud resources. It is used both for controlling internal enterprise IT resources and
for selling cloud services. Waldur is composed of the following main components:</p>
<ul>
<li>Waldur MasterMind - broker and orchestrator of cloud services. Responsible for technical service delivery and
connected matters. Exposes REST API for management</li>
<li>Waldur HomePort - web-based self-service portal. Talks REST to MasterMind.</li>
</ul>
<p>Waldur is open-source, extendable and comes with a <a href="#about-support">professional support</a> provided by OpenNode.</p>
<p>To get a quick feeling what Waldur is, take a look at some <a href="#about-screenshots">screenshots</a>.</p>
<p>If you are interested in deploying, check the <a href="#getting-started">getting started</a> section!</p>
<p><img alt="Overview" src="assets/waldur_overview.png" /></p></section><section class="print-page" id="getting-started"><h1 id="getting-started-getting-started">Getting started</h1>
<p>Installing Waldur is a simple and straightforward process.</p>
<h2 id="getting-started-pick-method-of-installation">Pick method of installation</h2>
<p>There are 2 supported methods:</p>
<ul>
<li><a href="#admin-guide-deployment-docker-compose">Using docker-compose</a>. Fastest but runs on a single server.</li>
<li><a href="#admin-guide-deployment-kubernetes.md">Using Helm</a>. For deploying on Kubernetes clusters.</li>
</ul>
<h2 id="getting-started-configure-waldur">Configure Waldur</h2>
<p>Tune Waldur configuration to match your deployment. Majority of the configuration is done on Mastermind side.
Exact method of configuration depends on the chosen method of installation.
Settings are grouped by modules, you can see all available ones in
the <a href="#admin-guide-mastermind-configuration-configuration-guide">configuration guide</a>.</p>
<p>The most typical aspects for configuration are:</p>
<ul>
<li><a href="#admin-guide-whitelabelling.md">White-labelling</a>. Setting custom logos and terms of usage.</li>
<li>Configuring <a href="#admin-guide-identities-summary">identity providers</a>. Waldur supports a range of OIDC and SAML based IdPs.</li>
<li><a href="#admin-guide-providers-adding-an-offering">Adding offerings</a> for sharing among Waldur users.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For easier management of Waldur deployments and configuration we 
provide <a href="#admin-guide-managing-with-ansible">Ansible playbooks</a>. </p>
</div>
<h2 id="getting-started-profit">Profit!</h2>
<p>You are done! If you are happy and want to support the project, make sure you check the <a href="#about-support">support page</a>.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Before going to production, make sure you have completed 
the <a href="#admin-guide-checklist-for-production">go-live checklist</a>.</p>
</div></section><h1 class='nav-section-title'>About</h1><section class="print-page" id="about-contributing"><h1 id="about-contributing-contributing">Contributing</h1>
<p>Waldur is an open project welcoming contributions. To assure the smooth acceptance of contributions please review 
the contribution guidelines below.</p>
<h2 id="about-contributing-pull-requests">Pull requests</h2>
<p>We welcome contributions (patches, new features, translations, etc) through pull requests. Please make sure that the 
following is addressed when making a pull request:</p>
<ul>
<li>a request has a clear scope - new feature, bugfix, refactoring. Granular pull requests make integration much faster;</li>
<li>the code is following code conventions of the corresponding platform and linters / tests are passing;</li>
</ul>
<h2 id="about-contributing-localisation">Localisation</h2>
<p>If you see a term, which needs to be translated better, please submit a fix via <a href="https://localazy.com/p/waldur-homeport">Localazy</a>.</p>
<h2 id="about-contributing-license">License</h2>
<p>All contributions to Waldur can be accepted only you agree to license your contribution under the MIT license.
Please make sure that you have the right to sign off code as MIT.</p>
<h2 id="about-contributing-code-repositories">Code repositories</h2>
<table>
<thead>
<tr>
<th>Repository</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/waldur/waldur-homeport">HomePort</a></td>
<td>Code of Waldur Homeport web interface</td>
</tr>
<tr>
<td><a href="https://github.com/waldur/waldur-mastermind">MasterMind</a></td>
<td>Code of Waldur Mastermind orchestrator</td>
</tr>
<tr>
<td><a href="https://github.com/waldur/waldur-helm">Helm package</a></td>
<td>Helm packaging of Waldur for Kubernetes</td>
</tr>
<tr>
<td><a href="https://github.com/waldur/waldur-docker-compose">Docker-compose</a></td>
<td>Docker-compose packaging of Waldur</td>
</tr>
<tr>
<td><a href="https://github.com/waldur/ansible-waldur-module">Ansible module</a></td>
<td>Ansible module for Waldur APIs</td>
</tr>
</tbody>
</table></section><section class="print-page" id="about-governance"><h1 id="about-governance-governance">Governance</h1>
<p>Waldur is a project developed primarily by <a href="https://opennodecloud.com">OpenNode</a> with contributions from different
organizations. To make sure that the project is delivering a sound product, OpenNode maintains control over the
authoritative source code and covers Product owner and Architect roles (see below).</p>
<p>Waldur and all of its components are released under MIT license to be as friendly towards ecosystem as possible.</p>
<h2 id="about-governance-overview-of-the-development-process">Overview of the development process</h2>
<p>Waldur team tries to maintain a transparent process of development. In a team, each person can have one or more of the roles below.</p>
<h2 id="about-governance-roles">Roles</h2>
<ul>
<li>Project manager - collects and provides requirements for a particular Waldur-based project. Multiple people can have this role.</li>
<li>Product owner - analysis requirements from project managers and fits into a product roadmap. Maintains technical
  feature list. Single person at a time can have this role.</li>
<li>Architect - oversees Waldur platform development, including backend, frontend, external tools. Has a final word on
  the way how components are integrated. Single person at a time can have this role.</li>
<li>Developer - responsible for fulfilling tasks created. Multiple people can have this role.</li>
</ul>
<h2 id="about-governance-workflow">Workflow</h2>
<ul>
<li>Project manager communicates with customers, defines requirements for product owner.</li>
<li>Product owner analyses requirements from all projects and creates epics for technical features implementation. Epics 
  are assigned to the architect.</li>
<li>Architect defines general development plan for features from product owner, adds description to the epic and creates
  separate tasks or stories for component owners.</li>
<li>Developers process tasks.</li>
<li>Product owner releases tagged versions of the product once a certain amount of functionality or bugfixes went in.</li>
</ul></section><section class="print-page" id="about-reporting-issues"><h1 id="about-reporting-issues-reporting-issues">Reporting issues</h1>
<p>No software is perfect and issues are to be expected. If you observe something that you think needs fixing, please
provide issue report, which includes:</p>
<p>From <strong>HomePort</strong>:</p>
<ol>
<li>HAR request that has failed or that contains data required for rendering of the data.<ul>
<li><a href="https://www.keycdn.com/support/what-is-a-har-file">What is HAR</a></li>
<li><a href="https://support.zendesk.com/hc/en-us/articles/204410413-Generating-a-HAR-file-for-troubleshooting">Zendesk instructions for generating a HAR</a></li>
<li><a href="https://support.box.com/hc/en-us/articles/360043696054-How-to-Generate-Network-Captures-for-Troubleshooting">Box instructions for generating a HAR</a></li>
</ul>
</li>
<li>Screenshot of the error in a high enough resolution.</li>
</ol>
<p>From <strong>MasterMind</strong>:</p>
<ol>
<li>Latest mastermind logs that include stacktrace of the error, typically <em>core.log</em> and <em>celery-celery.log</em>.</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Logs may contain sensitive data, please make sure that you either cleanup the data or share it with a trusted
party before sharing the actual data.</p>
</div></section><section class="print-page" id="about-roadmap"><h1 id="about-roadmap-roadmap">Roadmap</h1>
<h2 id="about-roadmap-disclaimer">Disclaimer</h2>
<p>This document is a living document and is used for planning. Plans for the unreleased features can change without
further notice and hence cannot be used as a guaranteed delivery plan, the features can be delivered both
earlier and later.</p>
<p>Roadmap is created based on the backlog and requests from the existing users of Waldur. If you are interested in a
specific topic, please <a href="#about-support">reach out</a> to us.</p>
<p>Some of the tasks are common and some are functional, listed below.</p>
<h2 id="about-roadmap-continuous-improvements">Continuous improvements</h2>
<h3 id="about-roadmap-documentation">Documentation</h3>
<p>There is no such thing as a perfect documentation so we are constantly working on improving it.</p>
<h3 id="about-roadmap-cicd">CI/CD</h3>
<p>We believe that automation is a key to improving quality of code and happiness of developers, so we are
constantly working on improving CI/CD related aspects.</p>
<h3 id="about-roadmap-tests">Tests</h3>
<p>A good software is a reliable software, so we are always trying to add more sensible tests.</p>
<h2 id="about-roadmap-functional">Functional</h2>
<p>The list below is based on the Epics maintained in Waldur's task manager. They are labelled with  domains, which
have requested them. Domains are:</p>
<ul>
<li><strong>Generic</strong> - Common requirements, no extra label. </li>
<li><strong>Academia</strong> - originating from the research community;</li>
<li><strong>Commercial</strong> - originating from the commercial deployments;</li>
<li><strong>Government</strong> - originating from the public sector deployments.</li>
</ul>
<h3 id="about-roadmap-open-or-in-progress">Open or  in progress</h3>
<table>
<thead>
<tr>
<th><strong>Code</strong></th>
<th><strong>Description</strong></th>
<th><strong>Domain</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>WAL-4077</td>
<td>Integrate external quality metrics of Data repositories with Offerings</td>
<td></td>
</tr>
<tr>
<td>WAL-4074</td>
<td>FAIR Offerings - background linking of offering PIDs with published articles</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-4073</td>
<td>FAIR-services - add reminders for users about referrals of consumed resources via PIDs</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-4072</td>
<td>Expose summaries of Offerings publicly</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-4000</td>
<td>Allow to limit visibility of Offering by service provider</td>
<td>Academia Commercial</td>
</tr>
<tr>
<td>WAL-3999</td>
<td>Support for customer credits</td>
<td>Academia Commercial Government</td>
</tr>
<tr>
<td>WAL-3997</td>
<td>Add common limit management support to HomePort</td>
<td>Academia Commercial</td>
</tr>
<tr>
<td>WAL-3987</td>
<td>Extensions to SLURM module</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3964</td>
<td>Implement consolidated approach for remote user accounts management in marketplace offerings</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3963</td>
<td>Make order confirmation message a common functionality for all Marketplace</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3951</td>
<td>Implement more fine grained storage of user name</td>
<td></td>
</tr>
<tr>
<td>WAL-3943</td>
<td>Shared Openstack Tenant provider phase I</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3934</td>
<td>Functionality specific to deployment of Waldur in Puhuri project as Core</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3811</td>
<td>Improvements to feedback collection</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3805</td>
<td>Direct LDAP support for Linux identity</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3793</td>
<td>Tasks related to simplification of the invoice model</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3788</td>
<td>Add ability to see popularity of an offering from the list</td>
<td></td>
</tr>
<tr>
<td>WAL-3759</td>
<td>Add support of versioning for core objects</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3744</td>
<td>Add support for creating / managing projects and resources through API of external Waldur</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3736</td>
<td>Allow protecting resources from accidental deletion</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3689</td>
<td>Expose list of connected VMs for each security group</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3626</td>
<td>Add ability to generate API docs for select endpoints</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3625</td>
<td>Migrate from Issue types to Request types for Jira support backend</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3606</td>
<td>Introduce Organization level service manager role</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3596</td>
<td>Allow logins to Rancher via keycloak</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3595</td>
<td>Expose port management for OpenStack tenant</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3589</td>
<td>Expose Sankey diagram with costs and Service providers</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3585</td>
<td>Rancher access group management</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3582</td>
<td>Allow editing of invoice data for staff users</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-3563</td>
<td>Tasks related for getting Puhuri Core to work</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3524</td>
<td>Add support for sending notifications to users</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-3439</td>
<td>Add support for bookmarking offerings as favourites</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3400</td>
<td>Tasks related to gitlab dev pipelines</td>
<td></td>
</tr>
<tr>
<td>WAL-3339</td>
<td>Offerings (Reporting)</td>
<td></td>
</tr>
<tr>
<td>WAL-3334</td>
<td>Introduce vault for storing secret configuration in Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-3305</td>
<td>Chart for creating overview of existing organizations</td>
<td></td>
</tr>
<tr>
<td>WAL-3285</td>
<td>"Some of the services suggest purchasing of connected offerings</td>
<td>To Do</td>
</tr>
<tr>
<td>WAL-3272</td>
<td>Allow setting limit for the maximal size of the total volume type quota</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3218</td>
<td>Payment profiles (Phase III)</td>
<td></td>
</tr>
<tr>
<td>WAL-3205</td>
<td>UX stabilization (phase I)</td>
<td></td>
</tr>
<tr>
<td>WAL-3195</td>
<td>Improvements to the request-based item UX</td>
<td></td>
</tr>
<tr>
<td>WAL-3136</td>
<td>Marketplace Checklists (phase II)</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-3135</td>
<td>Support for auto-scalability of Waldur running on K8S</td>
<td></td>
</tr>
<tr>
<td>WAL-3103</td>
<td>Second phase of support for virtual routers in OpenStack.</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3076</td>
<td>Extend current model with ability to attach VMs directly to external networks</td>
<td>Academia Commercial</td>
</tr>
<tr>
<td>WAL-3072</td>
<td>Support for operations on multiple objects</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-3005</td>
<td>Followup tasks for payment profiles</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2991</td>
<td>Markeplace Scripts plugin phase I</td>
<td>Academia Commercial</td>
</tr>
<tr>
<td>WAL-2965</td>
<td>Enhancements to properly support virtual security gateway use-case</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2961</td>
<td>Tasks related to Kubernetes ON service development and operation</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2922</td>
<td>Tasks for exposing Offerings publicly</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2921</td>
<td>Extending Organization extended payment options</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2920</td>
<td>Tasks related for extending Waldur with ability to assess compliancy of organizations</td>
<td></td>
</tr>
<tr>
<td>WAL-2850</td>
<td>Extending Rancher to support Helm charts</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2843</td>
<td>Tasks related to building up monitoring for EOSC</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2780</td>
<td>Integration of PID services with Waldur models</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2776</td>
<td>A visual checklist for making sure that things are done for the project</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-2749</td>
<td>Tasks connected to improving security of Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-2748</td>
<td>Collection of tasks aimed at improving UX of Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-2747</td>
<td>Operational tools for Waldur deployments</td>
<td></td>
</tr>
<tr>
<td>WAL-2676</td>
<td>System for lightweight offering management</td>
<td></td>
</tr>
<tr>
<td>WAL-2637</td>
<td>Support for creating Rancher clusters</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2623</td>
<td>Introduce license support for OpenStack</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-2519</td>
<td>Improvements to VMware plugin</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-2401</td>
<td>Implement device booking feature</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-2134</td>
<td>Further developments of Marketplace</td>
<td></td>
</tr>
<tr>
<td>WAL-1442</td>
<td>Enhancements to Waldur for service provider visibility</td>
<td>Commercial</td>
</tr>
<tr>
<td>WAL-1309</td>
<td>Implement backend and frontend support for managing JIRA as a provider and issues as resources</td>
<td></td>
</tr>
<tr>
<td>WAL-1262</td>
<td>Efforts for getting Waldur into Redhat container store</td>
<td></td>
</tr>
<tr>
<td>WAL-1212</td>
<td>Reanimate Zabbix plugin</td>
<td></td>
</tr>
<tr>
<td>WAL-1056</td>
<td>IPv6 support for OpenStack provider</td>
<td>Academia Commercial Government</td>
</tr>
<tr>
<td>WAL-868</td>
<td>Refactor cost tracking</td>
<td></td>
</tr>
<tr>
<td>WAL-842</td>
<td>On-demand demo environment from waldur.com</td>
<td></td>
</tr>
<tr>
<td>WAL-791</td>
<td>Stress testing &amp; Profiling (vol 1)</td>
<td></td>
</tr>
<tr>
<td>WAL-500</td>
<td>Waldur-specifics for ISKE H audit</td>
<td>Government</td>
</tr>
<tr>
<td>WAL-198</td>
<td>Resource retention management</td>
<td>Academia Commercial Government</td>
</tr>
<tr>
<td>WAL-44</td>
<td>Navigation FTS</td>
<td></td>
</tr>
<tr>
<td>WAL-30</td>
<td>Quick alerts</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="about-roadmap-finished-or-discarded">Finished or discarded</h3>
<table>
<thead>
<tr>
<th><strong>Code</strong></th>
<th><strong>Description</strong></th>
<th><strong>Domain</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>WAL-3998</td>
<td>Add i18n support</td>
<td></td>
</tr>
<tr>
<td>WAL-3976</td>
<td>Allow setting end of life for project</td>
<td></td>
</tr>
<tr>
<td>WAL-3850</td>
<td>Convert OrderItems and Invoices PDF to on-the-fly generation</td>
<td></td>
</tr>
<tr>
<td>WAL-3833</td>
<td>Add an intro header to the personal dashboard</td>
<td></td>
</tr>
<tr>
<td>WAL-3804</td>
<td>Slurm user list</td>
<td></td>
</tr>
<tr>
<td>WAL-3710</td>
<td>Add support for tracking historical changes to important models</td>
<td></td>
</tr>
<tr>
<td>WAL-3592</td>
<td>Expose measured units in invoice details</td>
<td></td>
</tr>
<tr>
<td>WAL-3587</td>
<td>Render component usage as charts in homeport</td>
<td></td>
</tr>
<tr>
<td>WAL-3579</td>
<td>Support for description for Secgroup Rules</td>
<td></td>
</tr>
<tr>
<td>WAL-3551</td>
<td>Extensions to request-based item offerings to support Puhuri cases</td>
<td></td>
</tr>
<tr>
<td>WAL-3523</td>
<td>Add regular reminders for reviewing membership data of users</td>
<td></td>
</tr>
<tr>
<td>WAL-3520</td>
<td>Add a minimal privilege project member role</td>
<td></td>
</tr>
<tr>
<td>WAL-3497</td>
<td>Trello integration for feature requests</td>
<td></td>
</tr>
<tr>
<td>WAL-3466</td>
<td>Support editing of organizations in homeport</td>
<td></td>
</tr>
<tr>
<td>WAL-3407</td>
<td>Extension of checklists to personalized ones</td>
<td></td>
</tr>
<tr>
<td>WAL-3306</td>
<td>Growth chart shows changes over time of usage</td>
<td>Academia</td>
</tr>
<tr>
<td>WAL-3297</td>
<td>Financial overview improvements</td>
<td></td>
</tr>
<tr>
<td>WAL-3294</td>
<td>Actions for setting up Waldur at VU</td>
<td></td>
</tr>
<tr>
<td>WAL-3197</td>
<td>ITA PKI extension improvements</td>
<td></td>
</tr>
<tr>
<td>WAL-3096</td>
<td>Add support for OpenStack Router</td>
<td>Academia Government</td>
</tr>
<tr>
<td>WAL-3022</td>
<td>Redesign of slurm module</td>
<td></td>
</tr>
<tr>
<td>WAL-2989</td>
<td>Reports visible to support</td>
<td></td>
</tr>
<tr>
<td>WAL-2967</td>
<td>Basic feature to track quality of handling of a ticket</td>
<td></td>
</tr>
<tr>
<td>WAL-2666</td>
<td>Extending OpenStack integration with separate pricing for different volume types</td>
<td></td>
</tr>
<tr>
<td>WAL-2646</td>
<td>Tickets related to extension of OpenStack driver</td>
<td></td>
</tr>
<tr>
<td>WAL-2596</td>
<td>Drop OpenStack packages</td>
<td></td>
</tr>
<tr>
<td>WAL-2590</td>
<td>Tasks related to VMware that are need additional analysis</td>
<td></td>
</tr>
<tr>
<td>WAL-2491</td>
<td>VMware plugin</td>
<td></td>
</tr>
<tr>
<td>WAL-2025</td>
<td>Tasks related to extension of MasterMind API for BDG SSP</td>
<td></td>
</tr>
<tr>
<td>WAL-1988</td>
<td>Marketplace (3)</td>
<td></td>
</tr>
<tr>
<td>WAL-1808</td>
<td>Waldur Marketplace (Phase 2)</td>
<td></td>
</tr>
<tr>
<td>WAL-1640</td>
<td>Extension of ansible SDK with additional operations</td>
<td></td>
</tr>
<tr>
<td>WAL-1568</td>
<td>Migrate tables to React</td>
<td></td>
</tr>
<tr>
<td>WAL-1523</td>
<td>Waldur Marketplace (Phase I)</td>
<td></td>
</tr>
<tr>
<td>WAL-1504</td>
<td>Implement basic support for Dutch government cloud in Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-1402</td>
<td>Add support for MOAB provider</td>
<td></td>
</tr>
<tr>
<td>WAL-1289</td>
<td>Add support for Jira attachments</td>
<td></td>
</tr>
<tr>
<td>WAL-1288</td>
<td>Support view of users</td>
<td></td>
</tr>
<tr>
<td>WAL-1286</td>
<td>Add support for LDAP-based authentication backends</td>
<td></td>
</tr>
<tr>
<td>WAL-1255</td>
<td>Add support for Staff only VPC management</td>
<td></td>
</tr>
<tr>
<td>WAL-1113</td>
<td>Paypal support</td>
<td></td>
</tr>
<tr>
<td>WAL-1095</td>
<td>Basic Azure VM provider</td>
<td></td>
</tr>
<tr>
<td>WAL-1060</td>
<td>Waldur goes to K8S</td>
<td></td>
</tr>
<tr>
<td>WAL-1058</td>
<td>Resource import</td>
<td></td>
</tr>
<tr>
<td>WAL-969</td>
<td>Expert provider extension</td>
<td></td>
</tr>
<tr>
<td>WAL-962</td>
<td>Add organization self-registration</td>
<td></td>
</tr>
<tr>
<td>WAL-925</td>
<td>Add eduGain support for authentication</td>
<td></td>
</tr>
<tr>
<td>WAL-903</td>
<td>Improvements to invoice / accounting</td>
<td></td>
</tr>
<tr>
<td>WAL-839</td>
<td>Miration to ES 5.x</td>
<td></td>
</tr>
<tr>
<td>WAL-834</td>
<td>Migrate to Django 1.11</td>
<td></td>
</tr>
<tr>
<td>WAL-833</td>
<td>Create a PoC for Expert provider</td>
<td></td>
</tr>
<tr>
<td>WAL-832</td>
<td>Ansible module for Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-793</td>
<td>2nd phase of Grafana dashboards</td>
<td></td>
</tr>
<tr>
<td>WAL-790</td>
<td>Add ability to set cost limit on organization</td>
<td></td>
</tr>
<tr>
<td>WAL-751</td>
<td>Support for Ansible-playbooks as application providers</td>
<td></td>
</tr>
<tr>
<td>WAL-730</td>
<td>Waldur Mission Control (central management for Waldurs)</td>
<td></td>
</tr>
<tr>
<td>WAL-722</td>
<td>LDAP-based SSH access provider</td>
<td></td>
</tr>
<tr>
<td>WAL-713</td>
<td>Add TaaT authentication provider to Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-701</td>
<td>Notifications</td>
<td></td>
</tr>
<tr>
<td>WAL-686</td>
<td>Add support for smartid.ee IdP</td>
<td></td>
</tr>
<tr>
<td>WAL-604</td>
<td>Basic support mode</td>
<td></td>
</tr>
<tr>
<td>WAL-597</td>
<td>/admin improvements</td>
<td></td>
</tr>
<tr>
<td>WAL-596</td>
<td>HomePort localization</td>
<td></td>
</tr>
<tr>
<td>WAL-595</td>
<td>API Documentation</td>
<td></td>
</tr>
<tr>
<td>WAL-568</td>
<td>Grafana dashbord (for operators)</td>
<td></td>
</tr>
<tr>
<td>WAL-566</td>
<td>Predictive analysis for capacity planning (organization-view)</td>
<td></td>
</tr>
<tr>
<td>WAL-511</td>
<td>Fixes for a broken network model</td>
<td></td>
</tr>
<tr>
<td>WAL-479</td>
<td>Price estimation</td>
<td></td>
</tr>
<tr>
<td>WAL-468</td>
<td>Admin and user guides (initial)</td>
<td></td>
</tr>
<tr>
<td>WAL-463</td>
<td>Extended backup restoration</td>
<td></td>
</tr>
<tr>
<td>WAL-462</td>
<td>Extend snapshot management</td>
<td></td>
</tr>
<tr>
<td>WAL-461</td>
<td>Basic resource usage view</td>
<td></td>
</tr>
<tr>
<td>WAL-454</td>
<td>R: Update django to 1.9.</td>
<td></td>
</tr>
<tr>
<td>WAL-396</td>
<td>OpenStack providers pricing info</td>
<td></td>
</tr>
<tr>
<td>WAL-323</td>
<td>Use neutron for network operations.</td>
<td></td>
</tr>
<tr>
<td>WAL-297</td>
<td>Project policies</td>
<td></td>
</tr>
<tr>
<td>WAL-289</td>
<td>Optimizer for IaaS resource selection</td>
<td></td>
</tr>
<tr>
<td>WAL-287</td>
<td>Renaming of artifacts to Waldur</td>
<td></td>
</tr>
<tr>
<td>WAL-270</td>
<td>OpenStack Tenant dashboard access</td>
<td></td>
</tr>
<tr>
<td>WAL-262</td>
<td>OpenStack Tenant Network Management</td>
<td></td>
</tr>
<tr>
<td>WAL-259</td>
<td>OpenStack Instance Access Management</td>
<td></td>
</tr>
<tr>
<td>WAL-213</td>
<td>Basic policy support</td>
<td></td>
</tr>
<tr>
<td>WAL-199</td>
<td>Provider details</td>
<td></td>
</tr>
<tr>
<td>WAL-197</td>
<td>Customer support</td>
<td></td>
</tr>
<tr>
<td>WAL-169</td>
<td>API Token management</td>
<td></td>
</tr>
<tr>
<td>WAL-168</td>
<td>Extended membership management capabilities</td>
<td></td>
</tr>
<tr>
<td>WAL-106</td>
<td>Refactoring: Update DRF version.</td>
<td></td>
</tr>
<tr>
<td>WAL-88</td>
<td>Transactional event logs</td>
<td></td>
</tr>
<tr>
<td>WAL-82</td>
<td>Controls for user profile updates</td>
<td></td>
</tr>
<tr>
<td>WAL-79</td>
<td>Tenant Management</td>
<td></td>
</tr>
<tr>
<td>WAL-77</td>
<td>Request-based Offerings</td>
<td></td>
</tr>
<tr>
<td>WAL-76</td>
<td>Billing</td>
<td></td>
</tr>
<tr>
<td>WAL-75</td>
<td>Audit log</td>
<td></td>
</tr>
<tr>
<td>WAL-68</td>
<td>Waldur ServiceStore</td>
<td></td>
</tr>
<tr>
<td>WAL-43</td>
<td>Waldur white-labelling</td>
<td></td>
</tr>
<tr>
<td>WAL-42</td>
<td>Resource state display</td>
<td></td>
</tr>
<tr>
<td>WAL-41</td>
<td>Registration</td>
<td></td>
</tr>
<tr>
<td>WAL-17</td>
<td>Waldur HomePort L&amp;F</td>
<td></td>
</tr>
<tr>
<td>WAL-15</td>
<td>Waldur web page</td>
<td></td>
</tr>
<tr>
<td>WAL-9</td>
<td>OpenStack VM backup management</td>
<td></td>
</tr>
<tr>
<td>WAL-8</td>
<td>OpenStack Storage management</td>
<td></td>
</tr>
<tr>
<td>WAL-7</td>
<td>OpenStack Instance management</td>
<td></td>
</tr>
<tr>
<td>WAL-6</td>
<td>Waldur HomePort navigation</td>
<td></td>
</tr>
<tr>
<td>WAL-4</td>
<td>VPC / OpenStack Tenant purchase</td>
<td></td>
</tr>
<tr>
<td>WAL-3</td>
<td>Organization team management</td>
<td></td>
</tr>
<tr>
<td>WAL-2</td>
<td>I want to be able to manage my SSH keys</td>
<td></td>
</tr>
</tbody>
</table></section><section class="print-page" id="about-screenshots"><h1 id="about-screenshots-screenshots">Screenshots</h1>
<h2 id="about-screenshots-login-page">Login page</h2>
<p><a href="about/img/login.png"><img alt="Landing" src="about/img/login.png" /></a></p>
<h2 id="about-screenshots-organization-workspace">Organization workspace</h2>
<p><a href="about/img/org-dashboard.png"><img alt="Organization dashboard" src="about/img/org-dashboard.png" /></a></p>
<h2 id="about-screenshots-project-workspace">Project workspace</h2>
<p><a href="about/img/project-resource-list.png"><img alt="Resource list" src="about/img/project-resource-list.png" /></a>
<a href="about/img/project-openstack-details.png"><img alt="OpenStack details" src="about/img/project-openstack-details.png" /></a></p>
<h2 id="about-screenshots-support-workspace">Support workspace</h2>
<p><a href="about/img/support-financial.png"><img alt="Financial overview" src="about/img/support-financial.png" /></a>
<a href="about/img/support-growth.png"><img alt="Growth reporting" src="about/img/support-growth.png" /></a>
<a href="about/img/support-issues.png"><img alt="Service desk issue" src="about/img/support-issues.png" /></a>
<a href="about/img/support-users.png"><img alt="User management" src="about/img/support-users.png" /></a></p>
<h2 id="about-screenshots-marketplace">Marketplace</h2>
<p><a href="about/img/marketplace-tenant.png"><img alt="Private cloud creation" src="about/img/marketplace-tenant.png" /></a>
<a href="about/img/marketplace-instance.png"><img alt="VM creation" src="about/img/marketplace-instance.png" /></a>
<a href="about/img/marketplace-slurm.png"><img alt="SLURM creation" src="about/img/marketplace-slurm.png" /></a></p></section><section class="print-page" id="about-support"><h1 id="about-support-support">Support</h1>
<p>Waldur is an open-source project co-developed by <a href="https://opennodecloud.com">OpenNode</a> and <a href="https://hpc.ut.ee">University of Tartu</a>.</p>
<h2 id="about-support-support-and-sponsored-development">Support and sponsored development</h2>
<p>OpenNode provides several <a href="https://waldur.com/pricing/">options for support</a> with varying SLAs.</p>
<p>If you would like to know more, <a href="mailto:info@opennodecloud.com">reach out</a>!</p>
<h2 id="about-support-managed-hosting-for-academical-institutions">Managed hosting for academical institutions</h2>
<p>Please reach out to <a href="mailto:support@hpc.ut.ee">support@hpc.ut.ee</a> if you represent an R&amp;D organization
and interested in managed Waldur hosting.</p></section><h1 class='nav-section-title-end'>Ended: About</h1><h1 class='nav-section-title'>Admin guide</h1><section class="print-page" id="admin-guide-architecture"><h1 id="admin-guide-architecture-architecture">Architecture</h1>
<p>Waldur is composed of a several components.</p>
<ul>
<li>Homeport (web client, graphical interface) - React application</li>
<li>Mastermind API server - Django/Django REST Framework application implementing the core business logic</li>
<li>Celery workers - Background processing of tasks</li>
<li>Celery beat - Scheduling of periodic tasks for background processing</li>
<li>PostgreSQL database - Storing persistent data, also serves as Celery result store in Kubernetes deployment</li>
<li>Redis - Tasks queue and result store for Celery (Docker Compose deployment only)</li>
<li>RabbitMQ - Tasks queue and result store for Celery (Kubernetes deployment only)</li>
</ul>
<p><img alt="diagram" src="assets/components.svg" /></p></section><section class="print-page" id="admin-guide-backups"><h1 id="admin-guide-backups-backups">Backups</h1>
<p>Waldur keeps state in 2 components:</p>
<ul>
<li>Database - main persistency layer.</li>
<li>Message queue - contains transient data mostly about scheduled jobs and cache.</li>
</ul>
<p>Of these, only database needs to be backed up.</p>
<p>A typical approach to a backup is:</p>
<h2 id="admin-guide-backups-1-create-a-db-dump">1. Create a DB dump.</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>1. An entire db dump
```bash
docker exec -t waldur-db pg_dump -U waldur waldur | gzip -9 &gt; waldur-$(date +&#39;%Y%m%dT%H%M%S&#39;).sql.gz
```
2. An entire db dump with cleanup commands:
```bash
docker exec -t waldur-db pg_dump --clean -U waldur waldur | gzip -9 &gt; waldur-$(date +&#39;%Y%m%dT%H%M%S&#39;).sql.gz
```
3. A db dump containing only data
```bash
docker exec -t waldur-db pg_dump -a -U waldur waldur | gzip -9 &gt; waldur-$(date +&#39;%Y%m%dT%H%M%S&#39;).sql.gz
```
</code></pre></div>
</td></tr></table>
<h2 id="admin-guide-backups-2-copy-backup-to-a-remote-location">2. Copy backup to a remote location.</h2>
<p>Using rsync / scp or more specialised tools.</p>
<h2 id="admin-guide-backups-3-restore-the-created-backup">3. Restore the created backup.</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>cat waldur-backup.sql <span class="p">|</span> docker <span class="nb">exec</span> -i waldur-db psql -U waldur
</code></pre></div>
</td></tr></table>
<p>We suggest to make sure that backups are running regularly, e.g. using cron.</p></section><section class="print-page" id="admin-guide-checklist-for-production"><h1 id="admin-guide-checklist-for-production-checklist-for-go-live">Checklist for Go live</h1>
<h2 id="admin-guide-checklist-for-production-general">General</h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Make sure that privacy policy and terms of use are updated to the site specific ones.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Make sure that SMTP server and outgoing email address are configured and emails are sent out.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Reboot test: restart all the nodes where Waldur components are running, application should recover automatically.</li>
</ul>
<h2 id="admin-guide-checklist-for-production-security">Security</h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Remove or disable default staff accounts.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Generate a new random secret key.</li>
</ul>
<h2 id="admin-guide-checklist-for-production-backups">Backups</h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Make sure that configuration of Waldur is backed up and versioned.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Assure that DB backups are performed, i.e. backups are created when manually triggering. </li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Assure that DB backups files are on a persistent storage, preferably outside the storage used for Waldur's database.</li>
</ul>
<h2 id="admin-guide-checklist-for-production-air-gapped-deployments">Air-gapped deployments</h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox"/><span class="task-list-indicator"></span></label> Make sure that Waldur docker images are mirrored to a local registry.</li>
</ul></section><section class="print-page" id="admin-guide-cookie-policy"><h1 id="admin-guide-cookie-policy-cookie-policy">Cookie policy</h1>
<p>Waldur can save data about the user in a browser. Data type and policy depends on the component.</p>
<h2 id="admin-guide-cookie-policy-homeport">HomePort</h2>
<ul>
<li>Saving of the latest view point of the user.</li>
<li>Saving redirect information, i.e. where to forward from a certain state.</li>
<li>Saving which authentication method was used by user for logging in.</li>
<li>Saving user session token.</li>
<li>Saving user language preference.</li>
</ul>
<h2 id="admin-guide-cookie-policy-mastermind">MasterMind</h2>
<ul>
<li>Saving authentication token (cookie) when a user logs into /admin management interface.  </li>
</ul></section><section class="print-page" id="admin-guide-hardware-requirements"><h1 id="admin-guide-hardware-requirements-hardware-requirements">Hardware requirements</h1>
<h2 id="admin-guide-hardware-requirements-docker-compose-deployment-on-a-single-server">Docker-compose deployment (on a single server)</h2>
<ul>
<li>Docker version: 1.13+</li>
<li>Minimal configuration: 4 vCPU, 8 GB RAM</li>
</ul>
<h2 id="admin-guide-hardware-requirements-helm-based-deployment">Helm-based deployment</h2>
<ul>
<li>Kubernetes version: 1.18+</li>
<li>Minimal namespace limits: TODO</li>
</ul>
<h2 id="admin-guide-hardware-requirements-component-specific-requirements">Component specific requirements</h2>
<h3 id="admin-guide-hardware-requirements-waldur-mastermind-api">Waldur Mastermind (API)</h3>
<p>By default 4 uWSGI processes are started.
- Minimum requirements: 1 CPU, 1GB RAM for every node
- Recommended setup: 2 CPU or more, 2 GB RAM or more</p>
<h3 id="admin-guide-hardware-requirements-waldur-mastermind-celery-worker">Waldur Mastermind (Celery worker)</h3>
<p>By default a single worker with 10 threads is started.</p>
<ul>
<li>Minimum requirements: 2 CPU, 1 GB RAM</li>
<li>Recommended setup: 4 CPU or more, 8 GB RAM or more</li>
</ul>
<p><strong>More memory should be added if more Celery worker processes are running on the same host (512 MB for each 4 Celery workers).</strong></p>
<h3 id="admin-guide-hardware-requirements-waldur-mastermind-celery-beat">Waldur Mastermind (Celery beat)</h3>
<p>A single Celery beat process is started.</p>
<ul>
<li>Minimum and recommended requirements: 1 CPU, 1 GB RAM</li>
</ul>
<h3 id="admin-guide-hardware-requirements-postgresql">PostgreSQL</h3>
<ul>
<li>Minimum requirements: 1 CPU, 1 GB RAM</li>
<li>Recommended setup: 2 CPU or more, 2 GB RAM or more</li>
</ul>
<h3 id="admin-guide-hardware-requirements-redis">Redis</h3>
<ul>
<li>Minimum requirements: 1 CPU, 512 MB RAM</li>
<li>Recommended setup: 2 CPU or more, 1 GB RAM or more</li>
</ul>
<h2 id="admin-guide-hardware-requirements-waldur-homeport-nginx">Waldur HomePort (Nginx)</h2>
<ul>
<li>Minimum and recommended requirements: 1 CPU and 512MB RAM</li>
</ul></section><section class="print-page" id="admin-guide-managing-with-ansible"><h1 id="admin-guide-managing-with-ansible-managing-waldur-with-ansible">Managing Waldur with Ansible</h1>
<p><strong>NB!</strong> Repository with Ansible playbooks for Waldur management is not open-sourced. It is available to Waldur users
that have purchased support packages.</p>
<h2 id="admin-guide-managing-with-ansible-compatibility">Compatibility</h2>
<p>Ansible version 2.9 is supported; code in this repository may work with other Ansible versions but it is not guaranteed.</p>
<h2 id="admin-guide-managing-with-ansible-quick-setup">Quick setup</h2>
<ol>
<li>Make sure that you have:<ul>
<li>Folder containing managed-ansible Ansible installer (this one).</li>
<li>Folder containing deployment-specific settings.</li>
</ul>
</li>
<li>Copy <code>setup_deployment.sh.example</code> to <code>setup_deployment.sh</code>, adjust:<ul>
<li>INSTALLER_PATH - full path to current folder</li>
<li>DEPLOYMENT_CONFIG_PATH - full path to folder with deployment-specific information</li>
<li>DEPLOYMENT_IDS - list of deployment IDs you want to manage.</li>
</ul>
</li>
<li>Run ./setup_deployment.sh. This will create required symlinks.</li>
<li>Run <code>ansible-playbook -DC &lt;deployment_id.yml&gt;</code> to check what installer will do.</li>
<li>Run <code>ansible-playbook -D &lt;deployment_id.yml&gt;</code> to apply the installer.</li>
</ol>
<h2 id="admin-guide-managing-with-ansible-upgrading-installer">Upgrading installer</h2>
<ol>
<li>Download a new archive into a separate folder and unpack.</li>
<li>Check what has changed:
    <code>rsync --dry-run -avzh unpacked-folder-eg-ansible-3.2.3/ /path/to/installer/</code></li>
<li>Do the upgrade:
    <code>rsync -avzh unpacked-folder-eg-ansible-3.2.3/ /path/to/installer/</code></li>
</ol>
<h2 id="admin-guide-managing-with-ansible-upgrading-waldur">Upgrading Waldur</h2>
<p>Upgrading Waldur to a new version is achieved by following the checklist:</p>
<ol>
<li>Update deployment-specific variables for the new version in <code>groups_vars/&lt;deployment_id&gt;/vars</code> and <code>groups_vars/&lt;deployment_id&gt;/vault</code> (if setting is private).</li>
<li>Update target version in <code>groups_vars/&lt;deployment_id&gt;/vars</code>: set <code>waldur_homeport_version</code> and <code>waldur_mastermind_version</code> to a new version of the Waldur release.</li>
<li>Run <code>ansible-playbook -DC &lt;deployment_id.yml&gt;</code> to check what installer will do during the upgrade.</li>
<li>Run <code>ansible-playbook -D &lt;deployment_id.yml&gt;</code> to perform an upgrade.</li>
</ol>
<h2 id="admin-guide-managing-with-ansible-add-new-deployment">Add new deployment</h2>
<p>Infrastructure:</p>
<ol>
<li>Prepare servers matching <a href="https://github.com/waldur/waldur-docs/blob/master/docs/admin-guide/hardware-requirements/requirements.md">requirements</a>.</li>
<li>Make sure you can access them by SSH by running only <code>ssh &lt;host&gt;</code>. Otherwise you should tweak <code>~/.ssh/config</code> file or describe connectivity in the Ansible inventory.</li>
</ol>
<p>Ansible (this repository):</p>
<ol>
<li>Add new deployment-specific host group to <code>hosts</code> file (example: <code>[foo]</code>); add hosts to this group.</li>
<li>Add hosts to Waldur role groups in <code>hosts</code> file.</li>
<li>Add variable files for new deployment: <code>group_vars/foo/vars</code> and <code>group_vars/foo/vault</code></li>
<li>Add deployment specific information under <code>deployments</code> folder.</li>
<li>Copy existing playbook that is the closest match for a new deployment; modify as needed</li>
<li>Run Ansible playbook to set up deployment: <code>ansible-playbook -D foo.yml</code></li>
</ol>
<h2 id="admin-guide-managing-with-ansible-remove-deployment">Remove deployment</h2>
<p>Ansible (this repository):</p>
<ol>
<li>Delete deployment-specific playbook, roles, tasks, templates etc.</li>
<li>Delete variable files: <code>rm -rf group_vars/foo</code></li>
<li>Delete deployment-specific host group and all deployment-specific hosts from <code>hosts</code> file (example: <code>[foo]</code>)</li>
</ol>
<h2 id="admin-guide-managing-with-ansible-managing-waldur-deployed-as-helm">Managing Waldur deployed as Helm</h2>
<p>Requirements:</p>
<ol>
<li>Installed and running <code>kubernetes</code> system on a node (e. g. minikube)</li>
<li>Installed <code>kubectl</code> on the node</li>
</ol>
<p>Place all configuration files for release in next manner:</p>
<ul>
<li><code>values.yaml</code> -&gt; <code>roles/waldur_helm/files/waldur_helm/waldur/</code></li>
<li><code>values.yaml</code> -&gt; <code>roles/waldur_helm/files/waldur_helm/waldur/</code></li>
<li>Files related to TLS -&gt; <code>deployments/&lt;deployment_id&gt;/tls/</code></li>
<li>Files related to white-labeling -&gt; <code>deployments/&lt;deployment_id&gt;/whitelabeling/</code></li>
<li>Files related to mastermind templates -&gt; <code>deployments/&lt;deployment_id&gt;/mastermind_templates/</code></li>
<li>Files related to stress testing -&gt; <code>deployments/&lt;deployment_id&gt;/locust_tasks/</code></li>
<li>Files related to SAML2 -&gt; <code>deployments/&lt;deployment_id&gt;/waldur_saml2/</code></li>
</ul>
<p>More configuration info:</p>
<ul>
<li><a href="https://github.com/opennode/waldur-helm/blob/master/docs/tls-config.md">TLS</a></li>
<li><a href="https://github.com/opennode/waldur-helm/blob/master/docs/whitelabeling.md">White-labeling</a></li>
<li><a href="https://github.com/opennode/waldur-helm/blob/master/docs/mastermind-templates.md">Mastermind templates</a></li>
</ul></section><h2 class='nav-section-title'>Deployment</h1><section class="print-page" id="admin-guide-deployment-docker-compose"><h1 id="admin-guide-deployment-docker-compose-waldur-docker-compose-deployment">Waldur Docker-compose deployment</h1>
<h2 id="admin-guide-deployment-docker-compose-prerequisites">Prerequisites</h2>
<ul>
<li>at least 8GB RAM on Docker Host to run all containers</li>
<li>Docker v1.13+</li>
</ul>
<h2 id="admin-guide-deployment-docker-compose-prepare-environment">Prepare environment</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1"># clone repo</span>
git clone https://github.com/waldur/waldur-docker-compose.git
<span class="nb">cd</span> waldur-docker-compose
<span class="c1"># setup settings</span>
cp .env.example .env
</code></pre></div>
</td></tr></table>
<h2 id="admin-guide-deployment-docker-compose-booting-up">Booting up</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1"># start containers</span>
docker-compose up -d

<span class="c1"># verify</span>
docker-compose ps
docker <span class="nb">exec</span> -t waldur-mastermind-worker status

<span class="c1"># Create user</span>
docker <span class="nb">exec</span> -t waldur-mastermind-worker waldur createstaffuser -u admin -p password -e admin@example.com
</code></pre></div>
</td></tr></table>
<p>Waldur HomePort will be accessible on <a href="http://localhost">http://localhost</a>.
API will listen on <a href="http://localhost/api">http://localhost/api</a>.</p>
<p>Healthcheck can be accessed on <a href="http://localhost/health-check">http://localhost/health-check</a>.</p>
<p>Tearing down and cleaning up:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>docker-compose down
</code></pre></div>
</td></tr></table></p>
<h2 id="admin-guide-deployment-docker-compose-upgrading-waldur">Upgrading Waldur</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>docker-compose pull
docker-compose restart
</code></pre></div>
</td></tr></table>
<h2 id="admin-guide-deployment-docker-compose-using-tls">Using TLS</h2>
<ol>
<li>Add private key and certificate to <code>./certs</code> folder.</li>
<li>Edit docker-compose.yml and replace port section with '80'. This is needed to force HTTP-&gt;HTTPS redirect from a TLS proxy:
<code>sed -i 's/${WALDUR_INTERNAL_PORT}:80/80/' docker-compose.yml</code>.</li>
<li>Start docker-compose with an extra TLS proxy:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1"># start containers</span>
docker-compose up -f docker-compose.yml -f tls-proxy.yml -d
</code></pre></div>
</td></tr></table></li>
</ol></section><section class="print-page" id="admin-guide-deployment-helm"><h2 id="admin-guide-deployment-helm-waldur-helm">Waldur Helm</h2>
<p>Waldur publishes a Helm chart for easy deployment on a Kubernetes cluster using the <a href="https://helm.sh">Helm</a> package manager.</p>
<h2 id="admin-guide-deployment-helm-installing-prerequisites">Installing prerequisites</h2>
<ol>
<li>Install Kubernetes server.</li>
<li>Install Kubernetes client, i.e. kubetctl.</li>
<li>Install <a href="https://helm.sh/docs/intro/install/">Helm</a></li>
</ol>
<h2 id="admin-guide-deployment-helm-installing-the-chart">Installing the Chart</h2>
<ol>
<li>Add the stable repository
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  helm repo add stable https://charts.helm.sh/stable
</code></pre></div>
</td></tr></table></li>
<li>Install Chart dependencies:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  helm dep update waldur
</code></pre></div>
</td></tr></table></li>
<li>
<p>Setup database:</p>
<p>3.1 Setup single PostgreSQL DB: <a href="https://github.com/waldur/waldur-helm/blob/master/docs/postgres-db.md">instructions</a>, or</p>
<p>3.2 Setup PostgreSQL HA DB: <a href="https://github.com/waldur/waldur-helm/blob/master/docs/postgres-db-ha.md">instructions</a></p>
<p><strong>NB</strong> Only one of these two options should be used. Otherwise, DB will be unavailable.
4. Install minio (for media): <a href="https://github.com/waldur/waldur-helm/blob/master/docs/minio.md">instructions</a>
5. Install RabbitMQ for task queue: <a href="https://github.com/waldur/waldur-helm/blob/master/docs/rabbitmq.md">instructions</a>
5. Install Helm package:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  # in &#39;waldur-helm-poc/&#39;
  helm install waldur waldur
</code></pre></div>
</td></tr></table>
<strong>NB</strong> After this command, Waldur release will run in <code>default</code> namespace. Please, pay attention in which namespace which release is running.</p>
</li>
</ol>
<p>For instance, you can install Waldur release in <code>test</code> namespace in the following way:</p>
<ol>
<li>Create <code>test</code> namespace:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  kubectl create namespace test
</code></pre></div>
</td></tr></table></li>
<li>Install release:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  helm install waldur waldur --namespace test
</code></pre></div>
</td></tr></table></li>
</ol>
<h2 id="admin-guide-deployment-helm-adding-admin-user">Adding admin user</h2>
<p>Open waldur-mastermind-worker shell and execute the following command:</p>
<ol>
<li>Get waldur-mastermind-worker pod name
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  # Example:
  kubectl get pods -A | grep waldur-mastermind-worker # --&gt;
  # default       waldur-mastermind-worker-6d98cd98bd-wps8n   1/1     Running     0          9m9s
</code></pre></div>
</td></tr></table></li>
<li>Connect to pod via shell
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  # Example:
  kubectl exec -it waldur-mastermind-worker-6d98cd98bd-wps8n -- /bin/bash
</code></pre></div>
</td></tr></table></li>
<li>Execute command to add admin user
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  waldur createstaffuser -u user -p password -e admin@example.com
</code></pre></div>
</td></tr></table></li>
</ol>
<h2 id="admin-guide-deployment-helm-waldur-helm-chart-release-upgrading">Waldur Helm chart release upgrading</h2>
<p>Delete initdb job (if exists):
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  kubectl delete job waldur-mastermind-initdb-job <span class="o">||</span> <span class="nb">true</span>
</code></pre></div>
</td></tr></table></p>
<p>Upgrade Waldur dependencies and release:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  helm dep update waldur/
  helm upgrade waldur waldur/
</code></pre></div>
</td></tr></table></p>
<p>Restart deployments to apply configmaps changes:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  kubectl rollout restart deployment waldur-mastermind-beat
  kubectl rollout restart deployment waldur-mastermind-api
  kubectl rollout restart deployment waldur-mastermind-worker
  kubectl rollout restart deployment waldur-homeport
</code></pre></div>
</td></tr></table></section><h1 class='nav-section-title-end'>Ended: Deployment</h1><h2 class='nav-section-title'>Identities</h1><section class="print-page" id="admin-guide-identities-ldap"><h1 id="admin-guide-identities-ldap-ldap">LDAP</h1>
<p>Waldur allows you to authenticate using identities from a LDAP server.</p>
<h3 id="admin-guide-identities-ldap-prerequisites">Prerequisites</h3>
<ul>
<li>Below it is assumed that LDAP server is provided by FreeIPA. Although LDAP authentication would work with any other
  LDAP server as well, you may need to customize configuration for Waldur MasterMind.</li>
<li>Please ensure that Waldur Mastermind API server has access to the LDAP server. By default LDAP server listens 
  on TCP and UDP port 389, or on port 636 for LDAPS (LDAP over SSL). If this port is filtered out by firewall,
  you wouldn't be able to authenticate via LDAP.</li>
<li>You should know LDAP server URI, for example, FreeIPA demo server has <code>ldap://ipa.demo1.freeipa.org</code>.</li>
<li>You should know username and password of LDAP admin user. For example, FreeIPA demo server uses 
  username=admin and password=Secret123.</li>
</ul>
<h3 id="admin-guide-identities-ldap-add-ldap-configuration-to-waldur-mastermind-configuration">Add LDAP configuration to Waldur Mastermind configuration</h3>
<p>Example configuration is below, please adjust to your specific deployment.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">ldap</span>
<span class="kn">from</span> <span class="nn">django_auth_ldap.config</span> <span class="kn">import</span> <span class="n">LDAPSearch</span><span class="p">,</span> <span class="n">GroupOfNamesType</span>

<span class="c1"># LDAP authentication.</span>
<span class="c1"># See also: https://django-auth-ldap.readthedocs.io/en/latest/authentication.html</span>
<span class="n">AUTHENTICATION_BACKENDS</span> <span class="o">+=</span> <span class="p">(</span>
    <span class="s1">&#39;django_auth_ldap.backend.LDAPBackend&#39;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">AUTH_LDAP_SERVER_URI</span> <span class="o">=</span> <span class="s1">&#39;ldap://ipa.demo1.freeipa.org&#39;</span>

<span class="c1"># Following variables are not used by django-auth-ldap,</span>
<span class="c1"># they are used as templates for other variables</span>
<span class="n">AUTH_LDAP_BASE</span> <span class="o">=</span> <span class="s1">&#39;cn=accounts,dc=demo1,dc=freeipa,dc=org&#39;</span>
<span class="n">AUTH_LDAP_USER_BASE</span> <span class="o">=</span> <span class="s1">&#39;cn=users,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_BASE</span>

<span class="c1"># Format authenticating user&#39;s distinguished name using template</span>
<span class="n">AUTH_LDAP_USER_DN_TEMPLATE</span> <span class="o">=</span> <span class="s1">&#39;uid=</span><span class="si">%(user)s</span><span class="s1">,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_USER_BASE</span>

<span class="c1"># Credentials for admin user</span>
<span class="n">AUTH_LDAP_BIND_DN</span> <span class="o">=</span> <span class="s1">&#39;uid=admin,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_USER_BASE</span>
<span class="n">AUTH_LDAP_BIND_PASSWORD</span> <span class="o">=</span> <span class="s1">&#39;Secret123&#39;</span>

<span class="c1"># Populate the Django user from the LDAP directory.</span>
<span class="n">AUTH_LDAP_USER_ATTR_MAP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;full_name&#39;</span><span class="p">:</span> <span class="s1">&#39;displayName&#39;</span><span class="p">,</span>
    <span class="s1">&#39;email&#39;</span><span class="p">:</span> <span class="s1">&#39;mail&#39;</span>
<span class="p">}</span>

<span class="c1"># Set up the basic group parameters.</span>
<span class="n">AUTH_LDAP_GROUP_BASE</span> <span class="o">=</span> <span class="s2">&quot;cn=groups,&quot;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_BASE</span>
<span class="n">AUTH_LDAP_GROUP_FILTER</span> <span class="o">=</span> <span class="s2">&quot;(objectClass=groupOfNames)&quot;</span>
<span class="n">AUTH_LDAP_GROUP_SEARCH</span> <span class="o">=</span> <span class="n">LDAPSearch</span><span class="p">(</span><span class="n">AUTH_LDAP_GROUP_BASE</span><span class="p">,</span>
    <span class="n">ldap</span><span class="o">.</span><span class="n">SCOPE_SUBTREE</span><span class="p">,</span> <span class="n">AUTH_LDAP_GROUP_FILTER</span><span class="p">)</span>
<span class="n">AUTH_LDAP_GROUP_TYPE</span> <span class="o">=</span> <span class="n">GroupOfNamesType</span><span class="p">(</span><span class="n">name_attr</span><span class="o">=</span><span class="s2">&quot;cn&quot;</span><span class="p">)</span>

<span class="n">AUTH_LDAP_USER_FLAGS_BY_GROUP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;is_staff&#39;</span><span class="p">:</span> <span class="s1">&#39;cn=admins,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_GROUP_BASE</span><span class="p">,</span>
    <span class="s1">&#39;is_support&#39;</span><span class="p">:</span> <span class="s1">&#39;cn=support,&#39;</span> <span class="o">+</span> <span class="n">AUTH_LDAP_GROUP_BASE</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Configuration above is based on LDAP server exposed by FreeIPA. To make it work, there are some things
that need to be verified in FreeIPA:</p>
<ol>
<li>Ensure that admins and support groups exist in LDAP server. You may do it using FreeIPA admin UI.
<a href="admin-guide/identities/img/freeipa-groups.png"><img alt="FreeIPA groups" src="admin-guide/identities/img/freeipa-groups.png" /></a></li>
<li>If user is assigned to admins group in LDAP, he becomes staff in Waldur.
If user is assigned to support group in LDAP, he becomes support user in Waldur.
For example, consider the manager user which belong to both groups:</li>
</ol>
<p><a href="admin-guide/identities/img/manager-freeipa.png"><img alt="Manager user" src="admin-guide/identities/img/manager-freeipa.png" /></a></p>
<h2 id="admin-guide-identities-ldap-field-mapping">Field mapping</h2>
<p><code>displayName</code> attribute in LDAP is mapped to full_name attribute in Waldur.
<code>mail</code> field in LDAP is mapped to email attribute in Waldur. </p>
<p>Consider for example, the following user attributes in LDAP:</p>
<p><a href="admin-guide/identities/img/manager-ldap-explorer.png"><img alt="LDAP explorer" src="admin-guide/identities/img/manager-ldap-explorer.png" /></a></p>
<p>Here's how it is mapped in Waldur:</p>
<p><a href="admin-guide/identities/img/manager-django-admin.png"><img alt="Waldur admin" src="admin-guide/identities/img/manager-django-admin.png" /></a></p>
<p>And here's how it is displayed when user initially logs into Waldur via HomePort:</p>
<p><a href="admin-guide/identities/img/manager-waldur.png"><img alt="Homeport login" src="admin-guide/identities/img/manager-waldur.png" /></a></p></section><section class="print-page" id="admin-guide-identities-tara"><h1 id="admin-guide-identities-tara-tara">TARA</h1>
<p>Waldur supports integration with <a href="https://tara.ria.ee/">TARA</a> authentication service.</p>
<p>To enable it, please register a new client for Waldur deployment and set configuration settings for TARA.
Check <a href="#admin-guide-mastermind-configuration-configuration-guide">configuration guide</a> for available settings.</p></section><section class="print-page" id="admin-guide-identities-edugain"><h1 id="admin-guide-identities-edugain-edugain">eduGAIN</h1>
<h2 id="admin-guide-identities-edugain-overview">Overview</h2>
<p><a href="https://wiki.geant.org/display/eduGAIN/eduGAIN+Home">eduGAIN</a> is a global federation of identity and service
providers, based technically on SAML2.</p>
<p>In order to allow eduGAIN users to access Waldur, there are two steps:</p>
<ul>
<li>Waldur deployment must be registered as a service provider in eduGAIN federation.</li>
<li>Waldur must get a list of identities that are trusted for authentication.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>SAML is a complicated and fragile technology. GEANT provides an alternative to direct integration of SAML - 
<a href="#admin-guide-identities-eduteams">eduTEAMS</a>, which exposes an OpenID Connect protocol for service providers. </p>
</div>
<p>Waldur relies on <a href="https://djangosaml2.readthedocs.io/">djangosaml2</a> for the heavylifting of SAML processing,
so for fine tuning configuration, contact corresponding project documentation.</p>
<h2 id="admin-guide-identities-edugain-registering-waldur-as-service-provider">Registering Waldur as Service Provider</h2>
<h3 id="admin-guide-identities-edugain-add-saml-configuration-to-waldur-mastermind-configuration">Add SAML configuration to Waldur Mastermind configuration</h3>
<p>Example configuration is below, please adjust to your specific deployment. Once applied, service metadata will be
visible at Waldur deployment URL: <code>https://waldur.example.com/api-auth/saml2/metadata/</code>. That data needs to be
propagated to the federation operator for inclusion into the federation.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><a href="#admin-guide-managing-with-ansible">Managed ansible</a> simplifies configuration of the eduGAIN integration and should
be a preferred method for all supported deployments.</p>
</div>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>

<span class="kn">import</span> <span class="nn">saml2</span>
<span class="kn">from</span> <span class="nn">saml2.entity_category.edugain</span> <span class="kn">import</span> <span class="n">COC</span>


<span class="n">WALDUR_AUTH_SAML2</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># used for assigning the registration method to the user</span>
    <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;saml2&#39;</span><span class="p">,</span>
    <span class="c1"># full path to the xmlsec1 binary program</span>
    <span class="s1">&#39;xmlsec_binary&#39;</span><span class="p">:</span> <span class="s1">&#39;/usr/bin/xmlsec1&#39;</span><span class="p">,</span>
    <span class="c1"># required for assertion consumer, single logout services and entity ID</span>
    <span class="s1">&#39;base_url&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="c1"># directory with attribute mapping</span>
    <span class="s1">&#39;attribute_map_dir&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="c1"># set to True to output debugging information</span>
    <span class="s1">&#39;debug&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="c1"># IdPs metadata XML files stored locally</span>
    <span class="s1">&#39;idp_metadata_local&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="c1"># IdPs metadata XML files stored remotely</span>
    <span class="s1">&#39;idp_metadata_remote&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="c1"># logging</span>
    <span class="c1"># empty to disable logging SAML2-related stuff to file</span>
    <span class="s1">&#39;log_file&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="s1">&#39;log_level&#39;</span><span class="p">:</span> <span class="s1">&#39;INFO&#39;</span><span class="p">,</span>
    <span class="c1"># Indicates if the entity will sign the logout requests</span>
    <span class="s1">&#39;logout_requests_signed&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
    <span class="c1"># Indicates if the authentication requests sent should be signed by default</span>
    <span class="s1">&#39;authn_requests_signed&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>
    <span class="c1"># Identifies the Signature algorithm URL according to the XML Signature specification</span>
    <span class="c1"># SHA1 is used by default</span>
    <span class="s1">&#39;signature_algorithm&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="c1"># Identifies the Message Digest algorithm URL according to the XML Signature specification</span>
    <span class="c1"># SHA1 is used by default</span>
    <span class="s1">&#39;digest_algorithm&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="c1"># Identified NameID format to use. None means default, empty string (&quot;&quot;) disables addition of entity</span>
    <span class="s1">&#39;nameid_format&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="c1"># PEM formatted certificate chain file</span>
    <span class="s1">&#39;cert_file&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="c1"># PEM formatted certificate key file</span>
    <span class="s1">&#39;key_file&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="c1"># SAML attributes that are required to identify a user</span>
    <span class="s1">&#39;required_attributes&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="c1"># SAML attributes that may be useful to have but not required</span>
    <span class="s1">&#39;optional_attributes&#39;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="c1"># mapping between SAML attributes and User fields</span>
    <span class="s1">&#39;saml_attribute_mapping&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="c1"># organization responsible for the service</span>
    <span class="c1"># you can set multilanguage information here</span>
    <span class="s1">&#39;organization&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="c1"># links to the entity categories</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">COC</span><span class="p">],</span>
    <span class="c1"># attributes required by CoC</span>
    <span class="c1"># https://wiki.refeds.org/display/CODE/SAML+2+Profile+for+the+Data+Protection+Code+of+Conduct</span>
    <span class="s1">&#39;privacy_statement_url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/privacy-policy/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;display_name&#39;</span><span class="p">:</span> <span class="s1">&#39;Service provider display name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Service provider description&#39;</span><span class="p">,</span>
    <span class="c1"># mdpi attributes</span>
    <span class="s1">&#39;registration_policy&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/registration-policy/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;registration_authority&#39;</span><span class="p">:</span> <span class="s1">&#39;http://example.com/registration-authority/&#39;</span><span class="p">,</span>
    <span class="s1">&#39;registration_instant&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
    <span class="s1">&#39;ENABLE_SINGLE_LOGOUT&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s1">&#39;ALLOW_TO_SELECT_IDENTITY_PROVIDER&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="s1">&#39;IDENTITY_PROVIDER_URL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;IDENTITY_PROVIDER_LABEL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;DEFAULT_BINDING&#39;</span><span class="p">:</span> <span class="n">saml2</span><span class="o">.</span><span class="n">BINDING_HTTP_POST</span><span class="p">,</span>
    <span class="s1">&#39;DISCOVERY_SERVICE_URL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">&#39;DISCOVERY_SERVICE_LABEL&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h3 id="admin-guide-identities-edugain-example-of-generated-metadata">Example of generated metadata</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;ns0:EntityDescriptor</span> <span class="na">xmlns:ns0=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:metadata&quot;</span> <span class="na">xmlns:ns1=</span><span class="s">&quot;urn:oasis:names:tc:SAML:metadata:attribute&quot;</span> <span class="na">xmlns:ns2=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span> <span class="na">xmlns:ns4=</span><span class="s">&quot;urn:oasis:names:tc:SAML:metadata:algsupport&quot;</span> <span class="na">xmlns:ns5=</span><span class="s">&quot;urn:oasis:names:tc:SAML:metadata:rpi&quot;</span> <span class="na">xmlns:ns6=</span><span class="s">&quot;urn:oasis:names:tc:SAML:metadata:ui&quot;</span> <span class="na">xmlns:ns7=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class="na">entityID=</span><span class="s">&quot;https://api.etais.ee/api-auth/saml2/metadata/&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;ns0:Extensions&gt;</span>
      <span class="nt">&lt;ns1:EntityAttributes&gt;</span>
         <span class="nt">&lt;ns2:Attribute</span> <span class="na">Name=</span><span class="s">&quot;http://macedir.org/entity-category&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;ns2:AttributeValue</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>http://www.geant.net/uri/dataprotection-code-of-conduct/v1<span class="nt">&lt;/ns2:AttributeValue&gt;</span>
         <span class="nt">&lt;/ns2:Attribute&gt;</span>
      <span class="nt">&lt;/ns1:EntityAttributes&gt;</span>
      <span class="nt">&lt;ns4:DigestMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:DigestMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#sha224&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:DigestMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:DigestMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#sha384&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:DigestMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmlenc#sha512&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#dsa-sha1&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2009/xmldsig11#dsa-sha256&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha1&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha224&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha224&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha256&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha384&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns4:SigningMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha512&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns5:RegistrationInfo</span> <span class="na">registrationAuthority=</span><span class="s">&quot;http://taat.edu.ee&quot;</span> <span class="na">registrationInstant=</span><span class="s">&quot;2017-01-01T00:00:00&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ns5:RegistrationPolicy</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>http://taat.edu.ee/main/wp-content/uploads/Federation_Policy_1.3.pdf<span class="nt">&lt;/ns5:RegistrationPolicy&gt;</span>
      <span class="nt">&lt;/ns5:RegistrationInfo&gt;</span>
   <span class="nt">&lt;/ns0:Extensions&gt;</span>
   <span class="nt">&lt;ns0:SPSSODescriptor</span> <span class="na">protocolSupportEnumeration=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span> <span class="na">AuthnRequestsSigned=</span><span class="s">&quot;true&quot;</span> <span class="na">WantAssertionsSigned=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ns0:Extensions&gt;</span>
         <span class="nt">&lt;ns6:UIInfo&gt;</span>
            <span class="nt">&lt;ns6:DisplayName</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>ETAIS Self-Service<span class="nt">&lt;/ns6:DisplayName&gt;</span>
            <span class="nt">&lt;ns6:Description</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>Self-service for users of Estonian Scientific Computing Infrastructure (ETAIS)<span class="nt">&lt;/ns6:Description&gt;</span>
            <span class="nt">&lt;ns6:Logo&gt;</span>https://minu.etais.ee/login-logo.png<span class="nt">&lt;/ns6:Logo&gt;</span>
            <span class="nt">&lt;ns6:PrivacyStatementURL</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>https://minu.etais.ee/views/policy/privacy-full.html<span class="nt">&lt;/ns6:PrivacyStatementURL&gt;</span>
         <span class="nt">&lt;/ns6:UIInfo&gt;</span>
      <span class="nt">&lt;/ns0:Extensions&gt;</span>
      <span class="nt">&lt;ns0:KeyDescriptor</span> <span class="na">use=</span><span class="s">&quot;signing&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ns7:KeyInfo&gt;</span>
            <span class="nt">&lt;ns7:X509Data&gt;</span>
               <span class="nt">&lt;ns7:X509Certificate&gt;</span>MIIDVzCCAj+gAwIBAgIJAN80zoFR2/UbMA0GCSqGSIb3DQEBCwUAMEIxCzAJBgNV BAYTAlhYMRUwEwYDVQQHDAxEZWZhdWx0IENpdHkxHDAaBgNVBAoME0RlZmF1bHQg Q29tcGFueSBMdGQwHhcNMTcwNDIxMDczMzA1WhcNMjcwNDIxMDczMzA1WjBCMQsw CQYDVQQGEwJYWDEVMBMGA1UEBwwMRGVmYXVsdCBDaXR5MRwwGgYDVQQKDBNEZWZh dWx0IENvbXBhbnkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA o87tb/hEU/igqFPtCFKMvC6LozTbH9y3I4lUVH38FDavDzrHAg1sVr5FEqguApeT xr/cmzsFMIB+XkAf9oI8xi2lUdorgeZFPFnUH0um4yXIJwBjrmgofUcybt84ee44 tM7AZKCAhinFDQUbjYV1LQP44QvFdGiklHGoo2NaVEqJwH6ce/8ioG5aFf2ISS6p fh3qOGVuQgansHFn+v+CvX+JU6FHB7mP+h3Xv+AoVjPz7b7E58rxn9qspy/N4LbB iDk7iBidsXEWYwYsSVP2cTrgKFktn5tB4YYZe0pSZNoCeVq05RK7kBy8yYCWTVZN Emkz5avL9Z2SDaGLY/9CTwIDAQABo1AwTjAdBgNVHQ4EFgQUrdY8o4OeseOy7ReD ZEZCKUZTk2gwHwYDVR0jBBgwFoAUrdY8o4OeseOy7ReDZEZCKUZTk2gwDAYDVR0T BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAoaygm+5U4j3/djWGQulXS2gdrPJV AS8zBuzQPVkhH76WcD8wxzuoceM80jPWLcP6Eq5Tma7rrqOE+QHrY8bm7LIYUEn2 fK/whozFyZ+TswEaDRjN6wL/FDuhu472Lnsg3rvE6s0eW1nlOHuqmqBQPb/kIMOj B3KOI6pqEfb+FqiZ2J/u/4KiOWaA8X9JQUo+HzWNEAPnNUoTl/yGr0Ad6z9YFbsu VnvJVTtGcu8pB5cjm7UtfN73ywEm/a/QXplus0U/Kv5XsSqaGa/Gw6pyX8LOc2yq I0XyOzj7DUcvMVZr5Vf/FVO2Od0Pb03+Wv4JRB5vXM1MsU+xAVgCm0pfew==<span class="nt">&lt;/ns7:X509Certificate&gt;</span>
            <span class="nt">&lt;/ns7:X509Data&gt;</span>
         <span class="nt">&lt;/ns7:KeyInfo&gt;</span>
      <span class="nt">&lt;/ns0:KeyDescriptor&gt;</span>
      <span class="nt">&lt;ns0:KeyDescriptor</span> <span class="na">use=</span><span class="s">&quot;encryption&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ns7:KeyInfo&gt;</span>
            <span class="nt">&lt;ns7:X509Data&gt;</span>
               <span class="nt">&lt;ns7:X509Certificate&gt;</span>MIIDVzCCAj+gAwIBAgIJAN80zoFR2/UbMA0GCSqGSIb3DQEBCwUAMEIxCzAJBgNV BAYTAlhYMRUwEwYDVQQHDAxEZWZhdWx0IENpdHkxHDAaBgNVBAoME0RlZmF1bHQg Q29tcGFueSBMdGQwHhcNMTcwNDIxMDczMzA1WhcNMjcwNDIxMDczMzA1WjBCMQsw CQYDVQQGEwJYWDEVMBMGA1UEBwwMRGVmYXVsdCBDaXR5MRwwGgYDVQQKDBNEZWZh dWx0IENvbXBhbnkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA o87tb/hEU/igqFPtCFKMvC6LozTbH9y3I4lUVH38FDavDzrHAg1sVr5FEqguApeT xr/cmzsFMIB+XkAf9oI8xi2lUdorgeZFPFnUH0um4yXIJwBjrmgofUcybt84ee44 tM7AZKCAhinFDQUbjYV1LQP44QvFdGiklHGoo2NaVEqJwH6ce/8ioG5aFf2ISS6p fh3qOGVuQgansHFn+v+CvX+JU6FHB7mP+h3Xv+AoVjPz7b7E58rxn9qspy/N4LbB iDk7iBidsXEWYwYsSVP2cTrgKFktn5tB4YYZe0pSZNoCeVq05RK7kBy8yYCWTVZN Emkz5avL9Z2SDaGLY/9CTwIDAQABo1AwTjAdBgNVHQ4EFgQUrdY8o4OeseOy7ReD ZEZCKUZTk2gwHwYDVR0jBBgwFoAUrdY8o4OeseOy7ReDZEZCKUZTk2gwDAYDVR0T BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAQEAoaygm+5U4j3/djWGQulXS2gdrPJV AS8zBuzQPVkhH76WcD8wxzuoceM80jPWLcP6Eq5Tma7rrqOE+QHrY8bm7LIYUEn2 fK/whozFyZ+TswEaDRjN6wL/FDuhu472Lnsg3rvE6s0eW1nlOHuqmqBQPb/kIMOj B3KOI6pqEfb+FqiZ2J/u/4KiOWaA8X9JQUo+HzWNEAPnNUoTl/yGr0Ad6z9YFbsu VnvJVTtGcu8pB5cjm7UtfN73ywEm/a/QXplus0U/Kv5XsSqaGa/Gw6pyX8LOc2yq I0XyOzj7DUcvMVZr5Vf/FVO2Od0Pb03+Wv4JRB5vXM1MsU+xAVgCm0pfew==<span class="nt">&lt;/ns7:X509Certificate&gt;</span>
            <span class="nt">&lt;/ns7:X509Data&gt;</span>
         <span class="nt">&lt;/ns7:KeyInfo&gt;</span>
      <span class="nt">&lt;/ns0:KeyDescriptor&gt;</span>
      <span class="nt">&lt;ns0:SingleLogoutService</span> <span class="na">Binding=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect&quot;</span> <span class="na">Location=</span><span class="s">&quot;https://api.etais.ee/api-auth/saml2/logout/complete/&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns0:SingleLogoutService</span> <span class="na">Binding=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot;</span> <span class="na">Location=</span><span class="s">&quot;https://api.etais.ee/api-auth/saml2/logout/complete/&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns0:AssertionConsumerService</span> <span class="na">Binding=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot;</span> <span class="na">Location=</span><span class="s">&quot;https://api.etais.ee/api-auth/saml2/login/complete/&quot;</span> <span class="na">index=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;ns0:AttributeConsumingService</span> <span class="na">index=</span><span class="s">&quot;1&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ns0:ServiceName</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>ETAIS Self-Service<span class="nt">&lt;/ns0:ServiceName&gt;</span>
         <span class="nt">&lt;ns0:RequestedAttribute</span> <span class="na">Name=</span><span class="s">&quot;urn:mace:dir:attribute-def:cn&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span> <span class="na">FriendlyName=</span><span class="s">&quot;cn&quot;</span> <span class="na">isRequired=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ns0:RequestedAttribute</span> <span class="na">Name=</span><span class="s">&quot;urn:oid:0.9.2342.19200300.100.1.3&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span> <span class="na">FriendlyName=</span><span class="s">&quot;mail&quot;</span> <span class="na">isRequired=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ns0:RequestedAttribute</span> <span class="na">Name=</span><span class="s">&quot;schacPersonalUniqueID&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span> <span class="na">isRequired=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ns0:RequestedAttribute</span> <span class="na">Name=</span><span class="s">&quot;urn:oid:1.3.6.1.4.1.5923.1.1.1.6&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span> <span class="na">FriendlyName=</span><span class="s">&quot;eduPersonPrincipalName&quot;</span> <span class="na">isRequired=</span><span class="s">&quot;true&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ns0:RequestedAttribute</span> <span class="na">Name=</span><span class="s">&quot;schacHomeOrganization&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span> <span class="na">isRequired=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ns0:RequestedAttribute</span> <span class="na">Name=</span><span class="s">&quot;urn:oid:2.16.840.1.113730.3.1.39&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span> <span class="na">FriendlyName=</span><span class="s">&quot;preferredLanguage&quot;</span> <span class="na">isRequired=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ns0:RequestedAttribute</span> <span class="na">Name=</span><span class="s">&quot;urn:oid:1.3.6.1.4.1.5923.1.1.1.9&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:uri&quot;</span> <span class="na">FriendlyName=</span><span class="s">&quot;eduPersonScopedAffiliation&quot;</span> <span class="na">isRequired=</span><span class="s">&quot;false&quot;</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/ns0:AttributeConsumingService&gt;</span>
   <span class="nt">&lt;/ns0:SPSSODescriptor&gt;</span>
   <span class="nt">&lt;ns0:Organization&gt;</span>
      <span class="nt">&lt;ns0:OrganizationName</span> <span class="na">xml:lang=</span><span class="s">&quot;et&quot;</span><span class="nt">&gt;</span>ETAIS<span class="nt">&lt;/ns0:OrganizationName&gt;</span>
      <span class="nt">&lt;ns0:OrganizationName</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>ETAIS<span class="nt">&lt;/ns0:OrganizationName&gt;</span>
      <span class="nt">&lt;ns0:OrganizationDisplayName</span> <span class="na">xml:lang=</span><span class="s">&quot;et&quot;</span><span class="nt">&gt;</span>ETAIS<span class="nt">&lt;/ns0:OrganizationDisplayName&gt;</span>
      <span class="nt">&lt;ns0:OrganizationDisplayName</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>ETAIS<span class="nt">&lt;/ns0:OrganizationDisplayName&gt;</span>
      <span class="nt">&lt;ns0:OrganizationURL</span> <span class="na">xml:lang=</span><span class="s">&quot;et&quot;</span><span class="nt">&gt;</span>http://etais.ee/<span class="nt">&lt;/ns0:OrganizationURL&gt;</span>
      <span class="nt">&lt;ns0:OrganizationURL</span> <span class="na">xml:lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>http://etais.ee/<span class="nt">&lt;/ns0:OrganizationURL&gt;</span>
   <span class="nt">&lt;/ns0:Organization&gt;</span>
   <span class="nt">&lt;ns0:ContactPerson</span> <span class="na">contactType=</span><span class="s">&quot;technical&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;ns0:GivenName&gt;</span>Administrator<span class="nt">&lt;/ns0:GivenName&gt;</span>
      <span class="nt">&lt;ns0:EmailAddress&gt;</span>etais@etais.ee<span class="nt">&lt;/ns0:EmailAddress&gt;</span>
   <span class="nt">&lt;/ns0:ContactPerson&gt;</span>
<span class="nt">&lt;/ns0:EntityDescriptor&gt;</span>
</code></pre></div>
</td></tr></table>
<h2 id="admin-guide-identities-edugain-adding-trusted-identity-providers">Adding trusted identity providers</h2>
<p>In order to configure Waldur to use SAML2 authentication you should specify identity provider metadata. </p>
<ul>
<li>If metadata XML is stored locally, it is cached in the local SQL database. Usually metadata XML file is big, so it
  is necessary to use local cache in this case. But you should ensure that metadata XML file is refreshed via cron
  on a regular basis. A management command <code>waldur sync_saml2_providers</code> performs refreshing of the data.</li>
<li>If metadata XML is accessed remotely, it is not cached in SQL database. Therefore you should ensure that metadata
  XML is small enough. In this case you should download metadata signing certificate locally and specify its path in
  Waldur configuration. The certificate is used to retrieve the metadata securely. Please note that security
  certificates are updated regularly, therefore you should update configuration whenever certificate is updated.
  By convention, both metadata signing certificate and metadata itself are downloaded to <code>/etc/waldur/saml2</code> in
  Waldur Mastermind instances.</li>
</ul>
<h2 id="admin-guide-identities-edugain-references">References</h2>
<h3 id="admin-guide-identities-edugain-taat-configuration">TAAT configuration</h3>
<p>TaaT certificates can be downloaded from: <a href="http://taat.edu.ee/main/dokumendid/sertifikaadid/">http://taat.edu.ee/main/dokumendid/sertifikaadid/</a>.</p>
<p>Metadata URL for test hub is <a href="https://reos.taat.edu.ee/saml2/idp/metadata.php">https://reos.taat.edu.ee/saml2/idp/metadata.php</a>
and for production hub is <a href="https://sarvik.taat.edu.ee/saml2/idp/metadata.php">https://sarvik.taat.edu.ee/saml2/idp/metadata.php</a>.
Note, the certificate must correspond to the hub you want connect to.</p>
<h4 id="admin-guide-identities-edugain-using-janus">Using Janus</h4>
<p><a href="https://taeva.taat.edu.ee/module.php/janus/index.php">Janus</a> is a self-service for managing Service Provider records.</p>
<ul>
<li>Create a new connection:</li>
</ul>
<p><a href="admin-guide/identities/img/janus-add-new.png"><img alt="Janus" src="admin-guide/identities/img/janus-add-new.png" /></a></p>
<p>New connection ID must be equal to the base_url in saml.conf.py + /apu-auth/saml2/metadata/</p>
<ul>
<li>Choose SAML 2.0 SP for connection type.</li>
<li>Click Create button</li>
<li>In connection tab select or create ARP. Fields that ARP include must be in the saml_attribute_mapping. </li>
<li>Navigate to the Import metadata tab and paste same URL as in the first step. Click on the Get metadata. </li>
<li>Navigate to the Validate tab and check whether all the tests pass. You can fix metadata in Metadata tab.</li>
</ul>
<h2 id="admin-guide-identities-edugain-haka-configuration">HAKA configuration</h2>
<p>Production hub metadata is described at <a href="https://wiki.eduuni.fi/display/CSCHAKA/Haka+metadata">https://wiki.eduuni.fi/display/CSCHAKA/Haka+metadata</a>.</p>
<p>Test hub metadata is described at <a href="https://wiki.eduuni.fi/display/CSCHAKA/Verifying+Haka+compatibility">https://wiki.eduuni.fi/display/CSCHAKA/Verifying+Haka+compatibility</a>.</p>
<h2 id="admin-guide-identities-edugain-fedi-configuration">FEDI configuration</h2>
<p>Production hub metadata is described at <a href="https://fedi.litnet.lt/en/metadata">https://fedi.litnet.lt/en/metadata</a>.</p>
<p>Discovery is supported: <a href="https://discovery.litnet.lt/simplesaml/module.php/discopower/disco.php">https://discovery.litnet.lt/simplesaml/module.php/discopower/disco.php</a>.</p></section><section class="print-page" id="admin-guide-identities-eduteams"><h1 id="admin-guide-identities-eduteams-eduteams">eduTeams</h1>
<p>Waldur supports integration with <a href="http://keycloak.org/">eduTEAMS</a> identity service.</p>
<p>To enable it, please <a href="https://wiki.geant.org/display/eduTEAMS/Registering+services+on+the+eduTEAMS+Service">register a new client</a>
for Waldur deployment and set configuration settings for eduTEAMS.
Check <a href="#admin-guide-mastermind-configuration-configuration-guide">configuration guide</a> for available settings.</p></section><section class="print-page" id="admin-guide-identities-freeipa"><h1 id="admin-guide-identities-freeipa-freeipa">FreeIPA</h1>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For integrating FreeIPA as source of identities, please see <a href="#admin-guide-identities-ldap">LDAP</a>.
This module is about synchronising users from Waldur to FreeIPA</p>
</div>
<p>For situations when you would like to provide access to services based on the Linux usernames, e.g. for SLURM
deployments, you might want to map users from Waldur (e.g. created through eduGAIN) to an external FreeIPA service.</p>
<p>To do that, you need to enable module and define settings for accessing FreeIPA REST APIs. See
<a href="#admin-guide-mastermind-configuration-configuration-guide">Waldur configuration guide</a> for the list of supported FreeIPA
settings.</p>
<p>At the moment at most one deployment of FreeIPA per Waldur is supported.</p></section><section class="print-page" id="admin-guide-identities-keycloak"><h1 id="admin-guide-identities-keycloak-keycloak">Keycloak</h1>
<p>Waldur supports integration with <a href="http://keycloak.org/">Keycloak</a> identity manager.</p>
<p>To enable it, please register a new client for Waldur deployment and set configuration settings for Keycloak.
Check <a href="#admin-guide-mastermind-configuration-configuration-guide">configuration guide</a> for available settings.</p></section><section class="print-page" id="admin-guide-identities-summary"><h1 id="admin-guide-identities-summary-summary">Summary</h1>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Protocol</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#admin-guide-identities-edugain">eduGAIN</a></td>
<td>SAML</td>
<td>Federation of research and educational providers supported by Geant</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-eduteams">eduTEAMS</a></td>
<td>OIDC</td>
<td>Group management service integrated with research and educational providers provided by Geant</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-freeipa">FreeIPA</a></td>
<td>REST API</td>
<td>Support for synchronisation of Waldur identities with open-source Identity Management server</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-keycloak">Keycloak</a></td>
<td>OIDC</td>
<td>Open-source identity management server</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-ldap">LDAP</a></td>
<td>LDAP/S</td>
<td>Support of identity servers over LDAP protocol</td>
</tr>
<tr>
<td><a href="#admin-guide-identities-tara">TARA</a></td>
<td>OIDC</td>
<td>Estonian State Autentication service</td>
</tr>
</tbody>
</table></section><h1 class='nav-section-title-end'>Ended: Identities</h1><h2 class='nav-section-title'>Mastermind configuration</h1><section class="print-page" id="admin-guide-mastermind-configuration-configuration-guide"><h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_auth_social-plugin">WALDUR_AUTH_SOCIAL plugin</h2>
<p>Default value: 
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">WALDUR_AUTH_SOCIAL</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;EDUTEAMS_AUTH_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://proxy.acc.eduteams.org/saml2sp/OIDC/authorization&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EDUTEAMS_CLIENT_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EDUTEAMS_LABEL&#39;</span><span class="p">:</span> <span class="s1">&#39;Eduteams&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EDUTEAMS_SECRET&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EDUTEAMS_TOKEN_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://proxy.acc.eduteams.org/OIDC/token&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EDUTEAMS_USERINFO_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://proxy.acc.eduteams.org/OIDC/userinfo&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ENABLE_EDUTEAMS_SYNC&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;FACEBOOK_CLIENT_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;FACEBOOK_SECRET&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_AUTH_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_CLIENT_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_LABEL&#39;</span><span class="p">:</span> <span class="s1">&#39;Keycloak&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_SECRET&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_TOKEN_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;KEYCLOAK_USERINFO_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_ACCESS_TOKEN&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_TOKEN_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://proxy.acc.researcher-access.org/OIDC/token&#39;</span><span class="p">,</span>
 <span class="s1">&#39;REMOTE_EDUTEAMS_USERINFO_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://proxy.acc.researcher-access.org/api/userinfo&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SMARTIDEE_CLIENT_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SMARTIDEE_SECRET&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;TARA_CLIENT_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;TARA_LABEL&#39;</span><span class="p">:</span> <span class="s1">&#39;Riigi Autentimisteenus&#39;</span><span class="p">,</span>
 <span class="s1">&#39;TARA_SANDBOX&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;TARA_SECRET&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
</code></pre></div>
</td></tr></table></p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-eduteams_auth_url">EDUTEAMS_AUTH_URL</h4>
<p>Type: str</p>
<p>The authorization endpoint performs authentication of the end-user. This is done by redirecting the user agent to this endpoint.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-eduteams_client_id">EDUTEAMS_CLIENT_ID</h4>
<p>Type: str</p>
<p>ID of application used for OAuth authentication.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-eduteams_label">EDUTEAMS_LABEL</h4>
<p>Type: str</p>
<p>Label is used by HomePort for rendering login button.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-eduteams_secret">EDUTEAMS_SECRET</h4>
<p>Type: str</p>
<p>Application secret key.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-eduteams_token_url">EDUTEAMS_TOKEN_URL</h4>
<p>Type: str</p>
<p>The token endpoint is used to obtain tokens.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-eduteams_userinfo_url">EDUTEAMS_USERINFO_URL</h4>
<p>Type: str</p>
<p>The userinfo endpoint returns standard claims about the authenticated user, and is protected by a bearer token.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-enable_eduteams_sync">ENABLE_EDUTEAMS_SYNC</h4>
<p>Type: bool</p>
<p>Enable EduTeams synchronization with remote Waldur.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-facebook_client_id">FACEBOOK_CLIENT_ID</h4>
<p>Type: str</p>
<p>ID of application used for OAuth authentication.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-facebook_secret">FACEBOOK_SECRET</h4>
<p>Type: str</p>
<p>Application secret key.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-keycloak_auth_url">KEYCLOAK_AUTH_URL</h4>
<p>Type: str</p>
<p>The authorization endpoint performs authentication of the end-user. This is done by redirecting the user agent to this endpoint.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-keycloak_client_id">KEYCLOAK_CLIENT_ID</h4>
<p>Type: str</p>
<p>ID of application used for OAuth authentication.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-keycloak_label">KEYCLOAK_LABEL</h4>
<p>Type: str</p>
<p>Label is used by HomePort for rendering login button.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-keycloak_secret">KEYCLOAK_SECRET</h4>
<p>Type: str</p>
<p>Application secret key.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-keycloak_token_url">KEYCLOAK_TOKEN_URL</h4>
<p>Type: str</p>
<p>The token endpoint is used to obtain tokens.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-keycloak_userinfo_url">KEYCLOAK_USERINFO_URL</h4>
<p>Type: str</p>
<p>The userinfo endpoint returns standard claims about the authenticated user, and is protected by a bearer token.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_access_token">REMOTE_EDUTEAMS_ACCESS_TOKEN</h4>
<p>Type: str</p>
<p>Token is used to authenticate against user info endpoint.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_token_url">REMOTE_EDUTEAMS_TOKEN_URL</h4>
<p>Type: str</p>
<p>The token endpoint is used to obtain tokens.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-remote_eduteams_userinfo_url">REMOTE_EDUTEAMS_USERINFO_URL</h4>
<p>Type: str</p>
<p>It allows to get user data based on userid aka CUID.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-smartidee_client_id">SMARTIDEE_CLIENT_ID</h4>
<p>Type: str</p>
<p>ID of application used for OAuth authentication.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-smartidee_secret">SMARTIDEE_SECRET</h4>
<p>Type: str</p>
<p>Application secret key.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-tara_client_id">TARA_CLIENT_ID</h4>
<p>Type: str</p>
<p>ID of application used for OAuth authentication.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-tara_label">TARA_LABEL</h4>
<p>Type: str</p>
<p>You may set it to eIDAS, SmartID or MobileID make it more clear to the user which exact identity provider is configured or preferred for service provider.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-tara_sandbox">TARA_SANDBOX</h4>
<p>Type: bool</p>
<p>You should set it to False in order to switch to production mode.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-tara_secret">TARA_SECRET</h4>
<p>Type: str</p>
<p>Application secret key.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_core-plugin">WALDUR_CORE plugin</h2>
<p>Default value: 
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">WALDUR_CORE</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ALLOW_SIGNUP_WITHOUT_INVITATION&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;ATTACHMENT_LINK_MAX_AGE&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">3600</span><span class="p">),</span>
 <span class="s1">&#39;AUTHENTICATION_METHODS&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;LOCAL_SIGNIN&#39;</span><span class="p">],</span>
 <span class="s1">&#39;BACKEND_FIELDS_EDITABLE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;COUNTRIES&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;EE&#39;</span><span class="p">,</span> <span class="s1">&#39;LV&#39;</span><span class="p">,</span> <span class="s1">&#39;LT&#39;</span><span class="p">],</span>
 <span class="s1">&#39;CREATE_DEFAULT_PROJECT_ON_ORGANIZATION_CREATION&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;CURRENCY_NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;EUR&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EMAIL_CHANGE_MAX_AGE&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
 <span class="s1">&#39;ENABLE_ACCOUNTING_START_DATE&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;ENABLE_GEOIP&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;EXTENSIONS_AUTOREGISTER&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;HOMEPORT_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://example.com/&#39;</span><span class="p">,</span>
 <span class="s1">&#39;HTTP_CHUNK_SIZE&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
 <span class="s1">&#39;INITIAL_CUSTOMER_AGREEMENT_NUMBER&#39;</span><span class="p">:</span> <span class="mi">4000</span><span class="p">,</span>
 <span class="s1">&#39;INVITATIONS_ENABLED&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;INVITATION_CREATE_MISSING_USER&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;INVITATION_DISABLE_MULTIPLE_ROLES&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;INVITATION_LIFETIME&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">),</span>
 <span class="s1">&#39;INVITATION_MAX_AGE&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;LOGGING_REPORT_DIRECTORY&#39;</span><span class="p">:</span> <span class="s1">&#39;/var/log/waldur&#39;</span><span class="p">,</span>
 <span class="s1">&#39;LOGGING_REPORT_INTERVAL&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">),</span>
 <span class="s1">&#39;NATIVE_NAME_ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;NOTIFICATIONS_PROFILE_CHANGES&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;ENABLED&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                                   <span class="s1">&#39;FIELDS&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span>
                                              <span class="s1">&#39;phone_number&#39;</span><span class="p">,</span>
                                              <span class="s1">&#39;job_title&#39;</span><span class="p">)},</span>
 <span class="s1">&#39;NOTIFICATION_SUBJECT&#39;</span><span class="p">:</span> <span class="s1">&#39;Notifications from Waldur&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ONLY_STAFF_CAN_INVITE_USERS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;ONLY_STAFF_MANAGES_SERVICES&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;OWNERS_CAN_MANAGE_OWNERS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;OWNER_CAN_MANAGE_CUSTOMER&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;PROTECT_USER_DETAILS_FOR_REGISTRATION_METHODS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;SELLER_COUNTRY_CODE&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;SHOW_ALL_USERS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;SITE_ADDRESS&#39;</span><span class="p">:</span> <span class="s1">&#39;Default address&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SITE_EMAIL&#39;</span><span class="p">:</span> <span class="s1">&#39;Default email&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SITE_LOGO&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;SITE_NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;Waldur MasterMind&#39;</span><span class="p">,</span>
 <span class="s1">&#39;SITE_PHONE&#39;</span><span class="p">:</span> <span class="s1">&#39;Default phone&#39;</span><span class="p">,</span>
 <span class="s1">&#39;TOKEN_KEY&#39;</span><span class="p">:</span> <span class="s1">&#39;x-auth-token&#39;</span><span class="p">,</span>
 <span class="s1">&#39;TOKEN_LIFETIME&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">3600</span><span class="p">),</span>
 <span class="s1">&#39;USE_ATOMIC_TRANSACTION&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;VALIDATE_INVITATION_EMAIL&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}</span>
</code></pre></div>
</td></tr></table></p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-allow_signup_without_invitation">ALLOW_SIGNUP_WITHOUT_INVITATION</h4>
<p>Type: bool</p>
<p>Allow to signup without an invitation.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-attachment_link_max_age">ATTACHMENT_LINK_MAX_AGE</h4>
<p>Type: timedelta</p>
<p>Max age of secure token for media download.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-authentication_methods">AUTHENTICATION_METHODS</h4>
<p>Type: List[str]</p>
<p>List of enabled authentication methods.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-backend_fields_editable">BACKEND_FIELDS_EDITABLE</h4>
<p>Type: bool</p>
<p>Allows to control /admin writable fields. If this flag is disabled it is impossible to edit any field that corresponds to backend value via /admin. Such restriction allows to save information from corruption.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-countries">COUNTRIES</h4>
<p>Type: List[str]</p>
<p>It is used in organization creation dialog in order to limit country choices to predefined set.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-create_default_project_on_organization_creation">CREATE_DEFAULT_PROJECT_ON_ORGANIZATION_CREATION</h4>
<p>Type: bool</p>
<p>Enables generation of the first project on organization creation.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-currency_name">CURRENCY_NAME</h4>
<p>Type: str</p>
<p>It is used in marketplace order details and invoices for currency formatting.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-email_change_max_age">EMAIL_CHANGE_MAX_AGE</h4>
<p>Type: timedelta</p>
<p>Max age of change email request.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-enable_accounting_start_date">ENABLE_ACCOUNTING_START_DATE</h4>
<p>Type: bool</p>
<p>Allows to enable accounting for organizations using value of accounting_start_date field.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-enable_geoip">ENABLE_GEOIP</h4>
<p>Type: bool</p>
<p>Enable detection of coordinates of virtual machines.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-extensions_autoregister">EXTENSIONS_AUTOREGISTER</h4>
<p>Type: bool</p>
<p>Defines whether extensions should be automatically registered.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-homeport_url">HOMEPORT_URL</h4>
<p>Type: str</p>
<p>It is used for rendering callback URL in HomePort.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-http_chunk_size">HTTP_CHUNK_SIZE</h4>
<p>Type: int</p>
<p>Chunk size for resource fetching from backend API. It is needed in order to avoid too long HTTP request error.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-initial_customer_agreement_number">INITIAL_CUSTOMER_AGREEMENT_NUMBER</h4>
<p>Type: int</p>
<p>Allows to tweak initial value of agreement number. It is assumed that organization owner should accept terms of services when organization is registered via Waldur HomePort.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-invitations_enabled">INVITATIONS_ENABLED</h4>
<p>Type: bool</p>
<p>Allows to disable invitations feature.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-invitation_create_missing_user">INVITATION_CREATE_MISSING_USER</h4>
<p>Type: bool</p>
<p>Allow to create FreeIPA user using details specified in invitation if user does not exist yet.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-invitation_disable_multiple_roles">INVITATION_DISABLE_MULTIPLE_ROLES</h4>
<p>Type: bool</p>
<p>Do not allow user to grant multiple roles in the same project or organization using invitation.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-invitation_lifetime">INVITATION_LIFETIME</h4>
<p>Type: timedelta</p>
<p>Defines for how long invitation remains valid.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-invitation_max_age">INVITATION_MAX_AGE</h4>
<p>Type: Optional[timedelta]</p>
<p>Max age of invitation token. It is used in approve and reject actions.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-logging_report_directory">LOGGING_REPORT_DIRECTORY</h4>
<p>Type: str</p>
<p>Directory where log files are located.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-logging_report_interval">LOGGING_REPORT_INTERVAL</h4>
<p>Type: timedelta</p>
<p>Files older that specified interval are filtered out.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-native_name_enabled">NATIVE_NAME_ENABLED</h4>
<p>Type: bool</p>
<p>Allows to render native name field in customer and user forms.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-notifications_profile_changes">NOTIFICATIONS_PROFILE_CHANGES</h4>
<p>Type: dict</p>
<p>Allows enabling notifications about profile changes of organization owners.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-notification_subject">NOTIFICATION_SUBJECT</h4>
<p>Type: str</p>
<p>It is used as a subject of email emitted by event logging hook.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-only_staff_can_invite_users">ONLY_STAFF_CAN_INVITE_USERS</h4>
<p>Type: bool</p>
<p>Allow to limit invitation management to staff only.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-only_staff_manages_services">ONLY_STAFF_MANAGES_SERVICES</h4>
<p>Type: bool</p>
<p>Allows to restrict provider management only to staff users.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-owners_can_manage_owners">OWNERS_CAN_MANAGE_OWNERS</h4>
<p>Type: bool</p>
<p>Enables organization owners to manage other organization owners.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-owner_can_manage_customer">OWNER_CAN_MANAGE_CUSTOMER</h4>
<p>Type: bool</p>
<p>Enables organization owners to create an organization.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-protect_user_details_for_registration_methods">PROTECT_USER_DETAILS_FOR_REGISTRATION_METHODS</h4>
<p>Type: List[str]</p>
<p>List of authentication methods which are not allowed to update user details.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-seller_country_code">SELLER_COUNTRY_CODE</h4>
<p>Type: Optional[str]</p>
<p>Specifies seller legal or effective country of registration or residence as an ISO 3166-1 alpha-2 country code. It is used for computing VAT charge rate.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-show_all_users">SHOW_ALL_USERS</h4>
<p>Type: bool</p>
<p>Indicates whether user can see all other users in <code>api/users/</code> endpoint.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-site_address">SITE_ADDRESS</h4>
<p>Type: str</p>
<p>It is used in marketplace order header.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-site_email">SITE_EMAIL</h4>
<p>Type: str</p>
<p>It is used in marketplace order header.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-site_logo">SITE_LOGO</h4>
<p>Type: Optional[str]</p>
<p>It is used in marketplace order header.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-site_name">SITE_NAME</h4>
<p>Type: str</p>
<p>It is used in email notifications in order to refer to the current deployment in user-friendly way.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-site_phone">SITE_PHONE</h4>
<p>Type: str</p>
<p>It is used in marketplace order header.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-token_key">TOKEN_KEY</h4>
<p>Type: str</p>
<p>Header for token authentication.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-token_lifetime">TOKEN_LIFETIME</h4>
<p>Type: timedelta</p>
<p>Defines for how long user token should remain valid if there was no action from user.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-use_atomic_transaction">USE_ATOMIC_TRANSACTION</h4>
<p>Type: bool</p>
<p>Wrap action views in atomic transaction.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-validate_invitation_email">VALIDATE_INVITATION_EMAIL</h4>
<p>Type: bool</p>
<p>Ensure that invitation and user emails match.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_freeipa-plugin">WALDUR_FREEIPA plugin</h2>
<p>Default value: 
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">WALDUR_FREEIPA</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;BLACKLISTED_USERNAMES&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">],</span>
 <span class="s1">&#39;ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;GROUPNAME_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_&#39;</span><span class="p">,</span>
 <span class="s1">&#39;GROUP_SYNCHRONIZATION_ENABLED&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;HOSTNAME&#39;</span><span class="p">:</span> <span class="s1">&#39;ipa.example.com&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;secret&#39;</span><span class="p">,</span>
 <span class="s1">&#39;USERNAME&#39;</span><span class="p">:</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span>
 <span class="s1">&#39;USERNAME_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_&#39;</span><span class="p">,</span>
 <span class="s1">&#39;VERIFY_SSL&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</code></pre></div>
</td></tr></table></p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-blacklisted_usernames">BLACKLISTED_USERNAMES</h4>
<p>Type: list</p>
<p>List of username that users are not allowed to select</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-enabled">ENABLED</h4>
<p>Type: bool</p>
<p>Enable integration of identity provisioning in configured FreeIPA</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-groupname_prefix">GROUPNAME_PREFIX</h4>
<p>Type: str</p>
<p>Prefix to be appended to all group names created in FreeIPA by Waldur</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-group_synchronization_enabled">GROUP_SYNCHRONIZATION_ENABLED</h4>
<p>Type: bool</p>
<p>Optionally disable creation of user groups in FreeIPA matching Waldur structure</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-hostname">HOSTNAME</h4>
<p>Type: str</p>
<p>Hostname of FreeIPA server</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-password">PASSWORD</h4>
<p>Type: str</p>
<p>Password of FreeIPA user with administrative privileges</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-username">USERNAME</h4>
<p>Type: str</p>
<p>Username of FreeIPA user with administrative privileges</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-username_prefix">USERNAME_PREFIX</h4>
<p>Type: str</p>
<p>Prefix to be appended to all usernames created in FreeIPA by Waldur</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-verify_ssl">VERIFY_SSL</h4>
<p>Type: bool</p>
<p>Validate TLS certificate of FreeIPA web interface / REST API</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_hpc-plugin">WALDUR_HPC plugin</h2>
<p>Default value: 
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">WALDUR_HPC</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;EXTERNAL_AFFILIATIONS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;EXTERNAL_CUSTOMER_UUID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EXTERNAL_EMAIL_PATTERNS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;INTERNAL_AFFILIATIONS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;INTERNAL_CUSTOMER_UUID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;INTERNAL_EMAIL_PATTERNS&#39;</span><span class="p">:</span> <span class="p">[],</span>
 <span class="s1">&#39;INTERNAL_LIMITS&#39;</span><span class="p">:</span> <span class="p">{},</span>
 <span class="s1">&#39;OFFERING_UUID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PLAN_UUID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}</span>
</code></pre></div>
</td></tr></table></p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-enabled_1">ENABLED</h4>
<p>Type: bool</p>
<p>Enable HPC-specific hooks in Waldur deployment</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-external_affiliations">EXTERNAL_AFFILIATIONS</h4>
<p>Type: List[str]</p>
<p>List of user affiliations (eduPersonScopedAffiliation fields) that define if the user belongs to external organization.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-external_customer_uuid">EXTERNAL_CUSTOMER_UUID</h4>
<p>Type: str</p>
<p>UUID of a Waldur organization (aka customer) where new external users would be added</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-external_email_patterns">EXTERNAL_EMAIL_PATTERNS</h4>
<p>Type: List[str]</p>
<p>List of user email patterns (as regex) that define if the user belongs to external organization.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-internal_affiliations">INTERNAL_AFFILIATIONS</h4>
<p>Type: List[str]</p>
<p>List of user affiliations (eduPersonScopedAffiliation fields) that define if the user belongs to internal organization.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-internal_customer_uuid">INTERNAL_CUSTOMER_UUID</h4>
<p>Type: str</p>
<p>UUID of a Waldur organization (aka customer) where new internal users would be added</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-internal_email_patterns">INTERNAL_EMAIL_PATTERNS</h4>
<p>Type: List[str]</p>
<p>List of user email patterns (as regex) that define if the user belongs to internal organization.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-internal_limits">INTERNAL_LIMITS</h4>
<p>Type: dict</p>
<p>Overrided default values for SLURM offering to be created for users belonging to internal organization.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-offering_uuid">OFFERING_UUID</h4>
<p>Type: str</p>
<p>UUID of a Waldur SLURM offering, which will be used for creating allocations for users</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-plan_uuid">PLAN_UUID</h4>
<p>Type: str</p>
<p>UUID of a Waldur SLURM offering plan, which will be used for creating allocations for users</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_marketplace-plugin">WALDUR_MARKETPLACE plugin</h2>
<p>Default value: 
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">WALDUR_MARKETPLACE</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ADMIN_CAN_APPROVE_ORDER&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;ANONYMOUS_USER_CAN_VIEW_OFFERINGS&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;DISABLE_SENDING_NOTIFICATIONS_ABOUT_RESOURCE_UPDATE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;ENABLE_STALE_RESOURCE_NOTIFICATIONS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;MANAGER_CAN_APPROVE_ORDER&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;NOTIFY_ABOUT_RESOURCE_CHANGE&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;NOTIFY_STAFF_ABOUT_APPROVALS&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;OWNER_CAN_APPROVE_ORDER&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;OWNER_CAN_REGISTER_SERVICE_PROVIDER&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;PLAN_TEMPLATE&#39;</span><span class="p">:</span> <span class="s1">&#39;Plan: {{ plan.name }}{</span><span class="si">% f</span><span class="s1">or component in components %}</span><span class="se">\n</span><span class="s1">&#39;</span>
                  <span class="s1">&#39;{{component.name}}; amount: {{component.amount}}; price: &#39;</span>
                  <span class="s1">&#39;{{component.price|floatformat }};{</span><span class="si">% e</span><span class="s1">ndfor %}&#39;</span><span class="p">,</span>
 <span class="s1">&#39;THUMBNAIL_SIZE&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">120</span><span class="p">)}</span>
</code></pre></div>
</td></tr></table></p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-admin_can_approve_order">ADMIN_CAN_APPROVE_ORDER</h4>
<p>Type: bool</p>
<p>If true, orders for resource can be approved by admin of the customer project</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-anonymous_user_can_view_offerings">ANONYMOUS_USER_CAN_VIEW_OFFERINGS</h4>
<p>Type: bool</p>
<p>Allow anonymous users to see shared offerings in active, paused and archived states</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-disable_sending_notifications_about_resource_update">DISABLE_SENDING_NOTIFICATIONS_ABOUT_RESOURCE_UPDATE</h4>
<p>Type: bool</p>
<p>Disable only resource update events.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-enable_stale_resource_notifications">ENABLE_STALE_RESOURCE_NOTIFICATIONS</h4>
<p>Type: bool</p>
<p>Enable reminders to owners about resources of shared offerings that have not generated any cost for the last 3 months.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-manager_can_approve_order">MANAGER_CAN_APPROVE_ORDER</h4>
<p>Type: bool</p>
<p>If true, orders for resource can be approved by manager of the customer project</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-notify_about_resource_change">NOTIFY_ABOUT_RESOURCE_CHANGE</h4>
<p>Type: bool</p>
<p>If true, notify users about resource changes from Marketplace perspective. Can generate duplicate events if plugins also log</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-notify_staff_about_approvals">NOTIFY_STAFF_ABOUT_APPROVALS</h4>
<p>Type: bool</p>
<p>If true, users with staff role are notified when request for order approval is generated</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-owner_can_approve_order">OWNER_CAN_APPROVE_ORDER</h4>
<p>Type: bool</p>
<p>If true, orders for resource can be approved by custom organization owner.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-owner_can_register_service_provider">OWNER_CAN_REGISTER_SERVICE_PROVIDER</h4>
<p>Type: bool</p>
<p>Allow organization owner to request or mark its organization as service provider</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-plan_template">PLAN_TEMPLATE</h4>
<p>Type: str</p>
<p>Template for a plan field</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-thumbnail_size">THUMBNAIL_SIZE</h4>
<p>Type: tuple</p>
<p>Size of the thumbnail to generate when screenshot is uploaded for an offering.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_pid-plugin">WALDUR_PID plugin</h2>
<p>Default value: 
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">WALDUR_PID</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;DATACITE&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;API_URL&#39;</span><span class="p">:</span> <span class="s1">&#39;https://example.com&#39;</span><span class="p">,</span>
              <span class="s1">&#39;COLLECTION_DOI&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
              <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
              <span class="s1">&#39;PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
              <span class="s1">&#39;PUBLISHER&#39;</span><span class="p">:</span> <span class="s1">&#39;Waldur&#39;</span><span class="p">,</span>
              <span class="s1">&#39;REPOSITORY_ID&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">}}</span>
</code></pre></div>
</td></tr></table></p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-datacite">DATACITE</h4>
<p>Type: dict</p>
<p>Settings for integration of Waldur with Datacite PID service. Collection DOI is used to aggregate generated DOIs.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-waldur_slurm-plugin">WALDUR_SLURM plugin</h2>
<p>Default value: 
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">WALDUR_SLURM</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ALLOCATION_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_allocation_&#39;</span><span class="p">,</span>
 <span class="s1">&#39;CUSTOMER_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_customer_&#39;</span><span class="p">,</span>
 <span class="s1">&#39;DEFAULT_LIMITS&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;CPU&#39;</span><span class="p">:</span> <span class="mi">16000</span><span class="p">,</span> <span class="s1">&#39;GPU&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">&#39;RAM&#39;</span><span class="p">:</span> <span class="mi">102400000</span><span class="p">},</span>
 <span class="s1">&#39;ENABLED&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;PRIVATE_KEY_PATH&#39;</span><span class="p">:</span> <span class="s1">&#39;/etc/waldur/id_rsa&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PROJECT_PREFIX&#39;</span><span class="p">:</span> <span class="s1">&#39;waldur_project_&#39;</span><span class="p">}</span>
</code></pre></div>
</td></tr></table></p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-allocation_prefix">ALLOCATION_PREFIX</h4>
<p>Type: str</p>
<p>Prefix for SLURM account name corresponding to Waldur allocation</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-customer_prefix">CUSTOMER_PREFIX</h4>
<p>Type: str</p>
<p>Prefix for SLURM account name corresponding to Waldur organization.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-default_limits">DEFAULT_LIMITS</h4>
<p>Type: dict</p>
<p>Default limits of account that are set when SLURM account is provisioned.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-enabled_2">ENABLED</h4>
<p>Type: bool</p>
<p>Enable support for SLURM plugin in a deployment</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-private_key_path">PRIVATE_KEY_PATH</h4>
<p>Type: str</p>
<p>Path to private key file used as SSH identity file for accessing SLURM master.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-project_prefix">PROJECT_PREFIX</h4>
<p>Type: str</p>
<p>Prefix for SLURM account name corresponding to Waldur project.</p>
<h2 id="admin-guide-mastermind-configuration-configuration-guide-other-variables">Other variables</h2>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-default_from_email">DEFAULT_FROM_EMAIL</h4>
<p>Type: str, default value: webmaster@localhost</p>
<p>Default email address to use for automated correspondence from Waldur.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-import_export_use_transactions">IMPORT_EXPORT_USE_TRANSACTIONS</h4>
<p>Type: bool, default value: True</p>
<p>Controls if resource importing should use database transactions. Using transactions makes imports safer as a failure during import wont import only part of the data set.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-ipstack_access_key">IPSTACK_ACCESS_KEY</h4>
<p>Type: Optional[str]</p>
<p>Unique authentication key used to gain access to the ipstack API.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-languages">LANGUAGES</h4>
<p>Type: List[Tuple[str, str]], default value: (('en', 'English'), ('et', 'Eesti'))</p>
<p>The list is a list of two-tuples in the format (language code, language name)  for example, ('ja', 'Japanese'). This specifies which languages are available for language selection.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-use_protected_url">USE_PROTECTED_URL</h4>
<p>Type: bool, default value: False</p>
<p>Protect media URLs using signed token.</p>
<h4 id="admin-guide-mastermind-configuration-configuration-guide-verify_webhook_requests">VERIFY_WEBHOOK_REQUESTS</h4>
<p>Type: bool, default value: True</p>
<p>When webook is processed, requests verifies SSL certificates for HTTPS requests, just like a web browser.</p></section><section class="print-page" id="admin-guide-mastermind-configuration-general"><h1 id="admin-guide-mastermind-configuration-general-general-configuration">General Configuration</h1>
<p>Outline:</p>
<ul>
<li><a href="#admin-guide-mastermind-configuration-general-introduction">Introduction</a></li>
<li><a href="#admin-guide-mastermind-configuration-general-waldur-core-settings">Waldur settings</a></li>
<li><a href="#admin-guide-mastermind-configuration-general-admin-dashboard-configuration">Admin dashboard configuration</a></li>
<li><a href="#admin-guide-mastermind-configuration-general-custom-templates-configuration">Custom templates configuration</a></li>
<li><a href="#admin-guide-mastermind-configuration-general-local-time-zone-configuration">Local time zone configuration</a></li>
</ul>
<h2 id="admin-guide-mastermind-configuration-general-introduction">Introduction</h2>
<p>Waldur is a <a href="https://www.djangoproject.com">Django</a>-based application, so configuration is done by modifying <code>settings.py</code> file.</p>
<p>If you want to configure options related to Django, such as tune caches, database connection, configure custom logging, etc, please refer to <a href="https://docs.djangoproject.com/en/2.2/">Django documentation</a>.</p>
<p>Please consult <a href="#admin-guide-mastermind-configuration-configuration-guide">configuration guide</a> to learn more.</p>
<h2 id="admin-guide-mastermind-configuration-general-admin-dashboard-configuration">Admin dashboard configuration</h2>
<p>An admin dashboard supports custom links on Quick access panel. For instance, a panel below was configured with one additional link to <strong>https://waldur.com</strong>:</p>
<p><img alt="admin example" src="admin-guide/mastermind-configuration/img/admin-example.png" /></p>
<p>Configuration of custom links is stored under <code>FLUENT_DASHBOARD_QUICK_ACCESS_LINKS</code> settings key and for current example has following structure:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">FLUENT_DASHBOARD_QUICK_ACCESS_LINKS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
   <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="s1">&#39;[Custom] Waldur - Cloud Service&#39;</span><span class="p">,</span>
   <span class="s1">&#39;url&#39;</span><span class="p">:</span> <span class="s1">&#39;https://waldur.com&#39;</span><span class="p">,</span>
   <span class="s1">&#39;external&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="c1"># adds an icon specifying that this link is external,</span>
   <span class="s1">&#39;description&#39;</span><span class="p">:</span> <span class="s1">&#39;Open-source Cloud Brokerage Platform&#39;</span><span class="p">,</span>
   <span class="s1">&#39;attrs&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="s1">&#39;_blank&#39;</span><span class="p">}</span> <span class="c1"># add an attribute to generated anchor element which will open link in a new tab.</span>
  <span class="p">},</span>
<span class="p">]</span>
</code></pre></div>
</td></tr></table>
Here is a short description of link parameters:</p>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Required</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>description</td>
<td>string</td>
<td>No</td>
<td>Tool tip on the link</td>
</tr>
<tr>
<td>external</td>
<td>boolean</td>
<td>No</td>
<td>Specifies whether additional icon indicating an external URL has to be added</td>
</tr>
<tr>
<td>url</td>
<td>URL</td>
<td>Yes</td>
<td>A URL of the link</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Yes</td>
<td>A title of the generated link</td>
</tr>
<tr>
<td>attrs</td>
<td>dict</td>
<td>No</td>
<td>A dictionary of anchor attributes to be added to generated element</td>
</tr>
</tbody>
</table>
<p>It is also possible to omit optional fields and add links by specifying only a title and a URL to the generated link.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">FLUENT_DASHBOARD_QUICK_ACCESS_LINKS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="s1">&#39;[Custom] Waldur - Cloud Service&#39;</span><span class="p">,</span> <span class="s1">&#39;https://waldur.com&#39;</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">&#39;Find us on GitHub&#39;</span><span class="p">,</span> <span class="s1">&#39;https://github.com/opennode/waldur-core&#39;</span><span class="p">],</span>
<span class="p">]</span>
</code></pre></div>
</td></tr></table>
<h2 id="admin-guide-mastermind-configuration-general-custom-templates-configuration">Custom templates configuration</h2>
<p>To overwrite default templates you should use <a href="https://github.com/jazzband/django-dbtemplates">django-dbtemplates</a>. It allows creation of templates through <code>/admin</code>.</p>
<h2 id="admin-guide-mastermind-configuration-general-local-time-zone-configuration">Local time zone configuration</h2>
<p>Set <code>TIME_ZONE</code> setting in <code>/etc/waldur/override.conf.py</code> to use local time zone. By default it is set to UTC. See the <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">list of time zones</a> for possible options.</p></section><section class="print-page" id="admin-guide-mastermind-configuration-google-calendar"><h1 id="admin-guide-mastermind-configuration-google-calendar-configuration-of-the-google-calendar">Configuration of the Google Calendar</h1></section><h1 class='nav-section-title-end'>Ended: Mastermind configuration</h1><h2 class='nav-section-title'>Providers</h1><section class="print-page" id="admin-guide-providers-adding-an-offering"><h1 id="admin-guide-providers-adding-an-offering-adding-an-offering">Adding an offering</h1>
<p>Waldur supports a number of different types of service providers when creating a shared offering. A common way of
creating an offering is through a HomePort.</p>
<ol>
<li>Select organization, which will provide the offering.</li>
<li>Make sure that organization is a service provider. Make it one with a staff user if the flag is not set.
<a href="admin-guide/providers/img/provider-manage.png"><img alt="Register provider" src="admin-guide/providers/img/provider-manage.png" /></a></li>
<li>Go to public offerings and click on adding a new one:
<a href="admin-guide/providers/img/add-offering.png"><img alt="Adding an offering" src="admin-guide/providers/img/add-offering.png" /></a></li>
<li>Fill in public offering details:
<a href="admin-guide/providers/img/add-offering-details.png"><img alt="Adding details" src="admin-guide/providers/img/add-offering-details.png" /></a></li>
<li>Activate offering to make it visible to everybody.
<a href="admin-guide/providers/img/activate-offering.png"><img alt="Activate offering" src="admin-guide/providers/img/activate-offering.png" /></a></li>
</ol>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For more advanced cases of management of offerings, take a look at how a SLURM offering can be managed using
<a href="https://github.com/waldur/ansible-waldur-module/blob/develop/waldur_batch_offering.py">Ansible module</a>. </p>
</div></section><section class="print-page" id="admin-guide-providers-azure"><h1 id="admin-guide-providers-azure-azure">Azure</h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Documentation is in progress. Plugin development is in progress.</p>
</div>
<h2 id="admin-guide-providers-azure-setting-up-tenant">Setting up Tenant</h2>
<p>https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-create-new-tenant</p>
<h2 id="admin-guide-providers-azure-setting-up-a-client">Setting up a Client</h2>
<p>https://docs.microsoft.com/en-us/azure/active-directory/develop/quickstart-register-app</p>
<h2 id="admin-guide-providers-azure-add-permissions">Add permissions</h2>
<p>Make sure that client is able to perform operations on the different resources.</p>
<p>https://stackoverflow.com/questions/42134892/the-client-with-object-id-does-not-have-authorization-to-perform-action-microso</p></section><section class="print-page" id="admin-guide-providers-moab"><h1 id="admin-guide-providers-moab-moab">MOAB</h1>
<p>MOAB is a scheduling engine for HPC centers.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>As adoption of MOAB has significantly reduced over the last years and there are no active users of Waldur with
MOAB requirements, we have deprecated and removed MOAB provider. </p>
</div>
<h2 id="admin-guide-providers-moab-migration-from-moab-to-slurm">Migration from MOAB to SLURM</h2>
<p>If you are still running MOAB and would like to move to a supported scheduler - SLURM, please find the suggested
articles below. They are provided by external parties with no affiliation to Waldur team.</p>
<ul>
<li><a href="https://rcc.fsu.edu/moab-slurm-migration-guide-archive">Moab to SLURM migration guide</a></li>
<li><a href="https://kb.northwestern.edu/page.php?id=89454">Converting Moab/Torque scripts to Slurm</a></li>
<li><a href="https://docs-research-it.berkeley.edu/services/high-performance-computing/user-guide/running-your-jobs/migrating-from-pbs/">Converting Moab/Torque script to Slurm #2</a></li>
<li><a href="https://hpcc.umd.edu/hpcc/help/slurm-vs-moab.html">Slurm vs Moab/Torque</a></li>
</ul></section><section class="print-page" id="admin-guide-providers-openstack"><h1 id="admin-guide-providers-openstack-openstack-tenant">OpenStack (Tenant)</h1>
<h2 id="admin-guide-providers-openstack-requirements-for-openstack-tenant">Requirements for OpenStack (Tenant)</h2>
<p>In order to integrate an OpenStack-based cloud as a shared provider, the following data is required:</p>
<ul>
<li>URL of Keystone's public endpoint (v3).</li>
<li>Access to public interfaces of Keystone, Nova, Cinder, Neutron and Glance should be opened to Waldur MasterMind server.</li>
<li>Admin credentials (username/password) as well as domain name (in case non-default domain is used).</li>
<li>External network UUID - the network will be by default connected to all created OpenStack Projects (Tenants).</li>
</ul>
<h2 id="admin-guide-providers-openstack-advanced-settings">Advanced settings</h2>
<p>It's possible to override some settings for OpenStack in MasterMind admin interface.
To do that, please go to Waldur MasterMind Admin interface with a staff account.</p>
<p>Go to Structure  Shared provider settings and select the one you want to update.</p>
<p>Define specific customisation options. To add an option select append on item block under the object tree. Most typical are:
- external_network_id  external network to connect to when creating a VPC from this provider.
- access_url - a URL to access OpenStack Horizon dashboard from a public network. Typically a reverse proxy URL in production deployments.
- flavor_exclude_regex - flavors matching this regex expression will not be pulled from the backend.
- dns_nameservers - default value for new subnets DNS name servers. Should be defined as list.
- create_ha_routers - create highly available Neutron routers when creating Tenants.</p>
<h2 id="admin-guide-providers-openstack-support-for-organization-specific-openstack-networks">Support for Organization specific OpenStack networks</h2>
<p>You can provide specific external network for all OpenStack Tenants created by Organiztion by providing external
network UUIDs in Organization configuration in Waldur Mastermind admin portal.</p>
<p><a href="admin-guide/providers/img/org-specific-os-network.png"><img alt="Organization specific OS networks" src="admin-guide/providers/img/org-specific-os-network.png" /></a></p></section><section class="print-page" id="admin-guide-providers-remote-waldur"><h1 id="admin-guide-providers-remote-waldur-remote-offering">Remote Offering</h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Documentation is in progress. Plugin development is in progress.</p>
</div>
<h2 id="admin-guide-providers-remote-waldur-introduction">Introduction</h2>
<p>It is possible to import into a Waldur offerings from a remote Waldur.</p>
<h2 id="admin-guide-providers-remote-waldur-pre-requisites">Pre-requisites</h2>
<ul>
<li>An organization in the remote Waldur, which will contain requests and projects from the local Waldur.</li>
<li>Account with owner role that will be used for integration.</li>
<li>Access to APIs of remote Waldur. </li>
</ul>
<h2 id="admin-guide-providers-remote-waldur-high-level-process">High level process</h2>
<ul>
<li>In local Waldur, make sure that you have a <a href="#admin-guide-providers-adding-an-offering">service provider</a> organization available.</li>
<li>Click on "Import offering".</li>
<li>Input remote Waldur API and authentication token.</li>
<li>Select the remote organization and offering to be imported.</li>
<li>Review and activate the offering. </li>
</ul>
<h2 id="admin-guide-providers-remote-waldur-eduteams-account-sync">EduTeams account SYNC</h2>
<p>In case both local and remote Waldurs are relying on a common set of identities 
from <a href="#admin-guide-identities-eduteams">EduTeams</a>, it is possible to configure synchronisation of the identities as well,
i.e. when a resource is provisioned in a remote Waldur, local accounts from organization and project are pushed and
mapped to the remote project.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For this to work, remote Waldur must be integrated with eduTeams registry and integration user must have
<code>identity_manager</code> role. </p>
</div></section><section class="print-page" id="admin-guide-providers-slurm"><h1 id="admin-guide-providers-slurm-slurm-provider">SLURM provider</h1>
<p>SLURM plugin enables sharing of access to a <a href="https://slurm.schedmd.com/">SLURM</a> cluster.
SLURM is a scheduling system used typically for managing High-performance clusters. Waldur allows to
share access by creating Slurm accounts and managing permission rights of users.</p>
<h2 id="admin-guide-providers-slurm-configure-waldur-slurm-plugin">Configure Waldur SLURM plugin</h2>
<p>By default, Waldur creates a hierarchical account structure in SLURM, where:</p>
<ul>
<li>Organization gets an account under a default account, defined when configuring SLURM service offering;</li>
<li>Each project is created as a an allocation, which is a child of organization's account.</li>
<li>Each resource created in Waldur (aka SLURM Allocation) gets its own SLURM account with project account as a parent.</li>
</ul>
<p>These accounts get standard prefixes along with unique values and user provided input.
It is possible to customize prefixes in Waldur configuration. Check WALDUR_SLURM variables in 
<a href="#admin-guide-mastermind-configuration-configuration-guide">Waldur configuration guide</a>.</p>
<h2 id="admin-guide-providers-slurm-add-slurm-provider">Add SLURM provider</h2>
<p>To add SLURM as a <a href="#admin-guide-providers-adding-an-offering">provider</a> to Waldur, you will need the following information:</p>
<ul>
<li>SSH host address to a node, from where SLURM commands could be executed.</li>
<li>Username that has Slurm <a href="https://slurm.schedmd.com/user_permissions.html">operator role</a>.
  Operator is needed as Waldur dynamically creates accounts based on user's choice of FreeIPA account.</li>
<li>Waldur public key must be added as authorized_key for the operator's username.</li>
<li>Slurm login node must be configured to authenticate users coming from FreeIPA connected to Waldur.</li>
</ul>
<h2 id="admin-guide-providers-slurm-slurm-auto-provisioning-hooks">SLURM auto-provisioning hooks</h2>
<p>It is possible to streamline creation of SLURM allocations for new users based on affiliation of a user profile.
Configuration settings are described in <a href="#admin-guide-mastermind-configuration-configuration-guide">Waldur configuration guide</a>
under WALDUR_HPC settings.</p>
<p>The logic is as follows:</p>
<ul>
<li>Once a user is created (e.g. via eduGAIN login), user's affiliation and email are checked to see if user belongs
  to internal or external organization.</li>
<li>If so, a project is created for the user in a corresponding organization.</li>
<li>For users belonging to internal organization, SLURM request is pre-filled and created using account limits of
  internal organizations.</li>
<li>For users belonging to external organization, SLURM request is pre-filled only - it would require a manual confirmation
  from the organization owner of the external organization to be provisioned. Default limits of SLURM apply.</li>
</ul>
<h2 id="admin-guide-providers-slurm-configure-slurm-cluster">Configure SLURM cluster</h2>
<p>Waldur might work out of the box with most of the reasonably modern deployments of SLURM, which have
accounting enabled and limits enforced.</p>
<p>Please refer to SLURM documentation for details:</p>
<ul>
<li><a href="https://slurm.schedmd.com/accounting.html">SLURM Accounting</a></li>
<li><a href="https://slurm.schedmd.com/resource_limits.html">SLURM Resource Limits</a></li>
<li><a href="https://slurm.schedmd.com/priority_multifactor.html">SLURM Multifactor Priority Plugin</a></li>
</ul>
<p>We provide a snapshot of instructions for the convenience of the reader.</p>
<h3 id="admin-guide-providers-slurm-add-slurm-cluster">Add SLURM cluster</h3>
<p>SLURM accounting plugin assumes that at least one cluster is configured. For example:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>sacctmgr add cluster linux
</code></pre></div>
</td></tr></table>
<h3 id="admin-guide-providers-slurm-enforce-slurm-accounting-limits">Enforce SLURM accounting limits</h3>
<p>In order to enforce limits set on associations and QoS, please modify slurm.conf:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>AccountingStorageEnforce=limits
</code></pre></div>
</td></tr></table>
<p>Please note, that when AccountingStorageEnforce is changed, a restart of the slurmctld daemon is required (not just a <code>scontrol reconfig</code>):</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>systemctl restart slurmctld
</code></pre></div>
</td></tr></table>
<h3 id="admin-guide-providers-slurm-enable-slurm-multi-priority-plugin">Enable SLURM Multi Priority plugin</h3>
<p>In order to enable ordering for the queue of jobs waiting to be scheduled, please modify slurm.conf:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>PriorityType=priority/multifactor
</code></pre></div>
</td></tr></table>
<p>When slurm.conf is changed, you should reload configuration:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>scontrol reconfig
</code></pre></div>
</td></tr></table></section><h1 class='nav-section-title-end'>Ended: Providers</h1><h1 class='nav-section-title-end'>Ended: Admin guide</h1><h1 class='nav-section-title'>Integrator guide</h1><section class="print-page" id="integrator-guide-ansible-module"><h1 id="integrator-guide-ansible-module-ansible-module-for-waldur">Ansible module for Waldur</h1>
<p>Waldur-based solutions can be managed with Ansible modules to allow provisioning and
management of infrastructure under Waldur through Ansible playbooks.</p>
<h2 id="integrator-guide-ansible-module-supported-functionality">Supported functionality</h2>
<ul>
<li>OpenStack management.</li>
<li>SLURM HPC management</li>
<li>Common client for Waldur APIs in Python.</li>
</ul>
<p>See also: http://docs.ansible.com/ansible/modules.html</p>
<h2 id="integrator-guide-ansible-module-installation">Installation</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>pip install ansible-waldur-module
</code></pre></div>
</td></tr></table>
<h2 id="integrator-guide-ansible-module-example-usage">Example usage</h2>
<h3 id="integrator-guide-ansible-module-configure-an-ansible-playbook-with-parameters">Configure an Ansible playbook with parameters</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Trigger master instance</span>
  <span class="nt">waldur_marketplace_os_instance</span><span class="p">:</span>
    <span class="nt">access_token</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">access_token</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">api_url</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">api_url</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">flavor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.micro</span>
    <span class="nt">floating_ip</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">auto</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CentOS 7 x86_64</span>
    <span class="nt">name</span><span class="p">:</span> <span class="s">&quot;{{</span><span class="nv"> </span><span class="s">instance_name</span><span class="nv"> </span><span class="s">}}&quot;</span>
    <span class="nt">project</span><span class="p">:</span> <span class="s">&quot;OpenStack</span><span class="nv"> </span><span class="s">Project&quot;</span>
    <span class="nt">offering</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Instance in Tenant</span>
    <span class="nt">ssh_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ssh1.pub</span>
    <span class="nt">subnet</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vpc-1-tm-sub-net-2</span>
    <span class="nt">system_volume_size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">40</span>
    <span class="nt">wait</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
</td></tr></table>
<h3 id="integrator-guide-ansible-module-pass-parameters-to-an-ansible-playbook">Pass parameters to an Ansible playbook</h3>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="nv">ANSIBLE_LIBRARY</span><span class="o">=</span>/usr/share/ansible-waldur/ ansible <span class="se">\</span>
    -m waldur_marketplace_os_instance <span class="se">\</span>
    -a <span class="s2">&quot;api_url=https://waldur.example.com/api/ access_token=9036194e1ac54cada3248a8c6b203bf7 name=instance-name project=&#39;Project name&#39;&quot;</span> <span class="se">\</span>
    localhost
</code></pre></div>
</td></tr></table>
<h3 id="integrator-guide-ansible-module-running-playbook-using-virtual-python-environment">Running playbook using virtual Python environment</h3>
<p>If you've installed Ansible Waldur module to virtual Python environment you need to specify
path to Python interpreter and path to module library along with path to playbook:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ansible-playbook <span class="se">\</span>
    -e <span class="nv">ansible_python_interpreter</span><span class="o">=</span>/home/user/ansible-env/bin/python <span class="se">\</span>
    -M /home/user/ansible-env/lib/python3.8/site-packages/ <span class="se">\</span>
    playbook.yml
</code></pre></div>
</td></tr></table>
<h2 id="integrator-guide-ansible-module-contributing">Contributing</h2>
<ol>
<li>
<p>See general guidelines: https://docs.ansible.com/ansible/latest/dev_guide/developing_modules_general.html</p>
</li>
<li>
<p>Install <code>pre-commit</code> and <code>tox</code></p>
</li>
</ol>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>pip install tox pre-commit
pre-commit install
</code></pre></div>
</td></tr></table>
<ol>
<li>
<p>When new module is implemented, don't forget to update <code>py_modules</code> section in <code>setup.py</code> file.</p>
</li>
<li>
<p>When new module is implemented, it should be covered with tests. Run tests using <code>tox</code></p>
</li>
</ol>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>tox
</code></pre></div>
</td></tr></table>
<ol>
<li>Module name should consist of three parts separated by underscore: <code>waldur</code>, plugin name, entity name.
For example, <code>waldur_os_snapshot</code> refers to OpenStack (OS) as plugin name and snapshot as entity name.</li>
</ol></section><h2 class='nav-section-title'>APIs</h1><section class="print-page" id="integrator-guide-apis-authentication"><h1 id="integrator-guide-apis-authentication-authentication">Authentication</h1>
<p>Outline:</p>
<ul>
<li><a href="#integrator-guide-apis-authentication-authentication-with-username-and-password">Authentication with username and password</a></li>
<li><a href="#integrator-guide-apis-authentication-authentication-token-management">Authentication Token management</a></li>
</ul>
<p>Waldur MasterMind exposes REST API for all of its operations. Below are examples of typical operations performed against APIs. To run the examples, we are using a <a href="https://httpie.org/">HTTPie</a>.</p>
<p>Almost all of the operations with API require an authentication token. Below we list two methods on how to get it.</p>
<h2 id="integrator-guide-apis-authentication-authentication-with-username-and-password">Authentication with username and password</h2>
<p>If your account is allowed to use username/password and the method is enabled (e.g. in dev environment), you can get a new token by submitting a username/password as JSON to a specific endpoint.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>$ http -v POST https://waldur.example.com/api-auth/password/ <span class="nv">username</span><span class="o">=</span>user <span class="nv">password</span><span class="o">=</span>password

POST /api-auth/password/ HTTP/1.1
Accept: application/json, */*<span class="p">;</span><span class="nv">q</span><span class="o">=</span><span class="m">0</span>.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Content-Length: <span class="m">40</span>
Content-Type: application/json
Host: waldur.example.com
User-Agent: HTTPie/2.3.0

<span class="o">{</span>
    <span class="s2">&quot;password&quot;</span>: <span class="s2">&quot;user&quot;</span>,
    <span class="s2">&quot;username&quot;</span>: <span class="s2">&quot;password&quot;</span>
<span class="o">}</span>

HTTP/1.1 <span class="m">200</span> OK
Access-Control-Allow-Credentials: <span class="nb">true</span>
Access-Control-Allow-Headers: Accept, Accept-Encoding, Authorization, Content-Type, Origin, User-Agent, X-CSRFToken, X-Requested-With
Access-Control-Allow-Methods: DELETE, GET, OPTIONS, PATCH, POST, PUT
Access-Control-Allow-Origin: *
Access-Control-Expose-Headers: Link, X-Result-Count
Allow: POST, OPTIONS
Content-Language: en
Content-Length: <span class="m">52</span>
Content-Security-Policy: report-uri csp.hpc.ut.ee<span class="p">;</span> form-action <span class="s1">&#39;self&#39;</span><span class="p">;</span>
Content-Type: application/json
Date: Mon, <span class="m">05</span> Apr <span class="m">2021</span> <span class="m">14</span>:37:55 GMT
Referrer-Policy: no-referrer-when-downgrade
Strict-Transport-Security: max-age<span class="o">=</span><span class="m">31536000</span><span class="p">;</span> preload
Vary: Accept-Language, Cookie
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: <span class="m">1</span><span class="p">;</span> <span class="nv">mode</span><span class="o">=</span>block

<span class="o">{</span>
    <span class="s2">&quot;token&quot;</span>: <span class="s2">&quot;65b4c4f5e25f0cadb3e11c181be4ffa3881741f8&quot;</span>
<span class="o">}</span>
</code></pre></div>
</td></tr></table>
<h2 id="integrator-guide-apis-authentication-authentication-token-management">Authentication Token management</h2>
<p>The easiest way to get your token is via Waldur HomePort. Go to user workspace by selecting 'Manage' in the user drop-down.</p>
<p><img alt="side-bar" src="integrator-guide/APIs/img/side-bar.png" style="height:288px;width:220px" /></p>
<p>Scroll down to the Current API token field and click on the 'eye' icon to display the token.</p>
<p><img alt="api-token" src="integrator-guide/APIs/img/api-token.png" /></p></section><h1 class='nav-section-title-end'>Ended: APIs</h1><h1 class='nav-section-title-end'>Ended: Integrator guide</h1><h1 class='nav-section-title'>User guide</h1><h1 class='nav-section-title-end'>Ended: User guide</h1></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2021 Waldur team
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.76f349be.min.js"></script>
      
        <script src="js/print-site-instant-loading.js"></script>
      
        <script src="js/print-site.js"></script>
      
    
  
        <script type="text/javascript">
        window.addEventListener('load', function () {
            generate_toc();
        })
        </script>
        </body>
</html>